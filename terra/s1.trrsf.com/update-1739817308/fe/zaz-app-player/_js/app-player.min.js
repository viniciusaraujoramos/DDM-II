/*! zaz-app-player - v1.0.0 - 17/02/2025 -- 6:31pm */

zaz.use(function appPlayer(pkg){"use strict";var country=pkg.context.page.get("query"),videoServiceUrl="https://p1-cloud.trrsf.com.br/playerttv/videoservice";country&&"hlg"==country.videoenv&&(videoServiceUrl="https://api-hlg.tpn.terra.com/ganesha");var console=pkg.console,appFactory=pkg.factoryManager.get("app"),STATIC_PUBLIC={},STATIC_PRIVATE_defaultHeight=360,STATIC_PRIVATE_states={building:0,ready:1,disclaimer:2,error:3},require=pkg.require,define=pkg.define,videoIdToken="#VIDEO_ID#",qualityToken="#VIDEO_QUALITY",thumbToken="#LAST_UPDATED#",heightToken="#HEIGHT#",imgFilter="#IMGFILTER#",shareUrlToken="#SHARE_URL#",posterCropperHeight=450,posterCropperWidth=800,thumbnailCropperHeight=108,thumbnailCropperWidth=192,storyboardWidth="140",storyboardImageCount="100",storyboardColumns="10",country=pkg.context.page.get("country"),STATIC={adTimeout:12e3,backendVideoUrl:videoServiceUrl+"/video/#VIDEO_ID#.json?country="+country,posterCropperUrl:"https://p2.trrsf.com/image/fget/cf/800/450/",thumbnailCropperUrl:"https://p2.trrsf.com/image/fget/cf/192/108/",posterUrl:"https://p1.trrsf.com"+("br"==country?".br":"")+"/image/fget/cf/"+imgFilter+"sdp.terra.com"+("br"==country?".br":"")+"/thumbox/freew/cnt#VIDEO_ID#_h#HEIGHT#_aNoChange_"+thumbToken+".jpg",storyboardUrl:"https://p1.trrsf.com"+("br"==country?".br":"")+"/image/fget/cf/vip-thb.terra.com.br/video/#VIDEO_ID#?split=100&width=140&columns=10",videoLink:"http://terratv.terra.com.br/trs/video/#VIDEO_ID#",embedString:'<iframe frameborder="0" width="600" height="338" src="https://p1.trrsf.com/playerttv/videoservice/iframe.html?country='+country+'&contentid=#VIDEO_ID#"></iframe>',relatedVideosUrl:"https://p1-cloud.trrsf.com.br/api/google-analytics/related-news?channel=noticias&subchannel=&channeldetail=&limit=4&offset=0&startDate=6daysAgo&endDate=yesterday&timeDelta=7&fallbackChannel=true&fallbackSubchannel=true&infoType=ttv",facebookShareUrl:"https://www.facebook.com/share.php?u=#SHARE_URL#",twitterShareUrl:"https://twitter.com/intent/tweet?text=#SHARE_URL#",pinterestShareUrl:"https://pinterest.com/pin/create/button/?url=#SHARE_URL#"};appFactory.create({name:"player",version:"2.0.0",state:"ok",docs:"http://github.tpn.terra.com/pages/terra/player",source:"http://github.tpn.terra.com/Terra/player",description:"Just another app",tests:"http://s1.trrsf.com/fe/player/tests/index.htm?zaz[env]=tests",dependencies:["mod.videojs"],templates:{theBasics:'<div class="t360-player-container t360-player-force-spinner {{\'pip-mode\' if continuePip else \'\'}}"><div class="vjs-loading-spinner t360-loading-vjs" dir="ltr"><span class="vjs-control-text"></span></div></div>',thePlayer:'<video class="t360-player video-js" poster="{{ videoData.poster }}" id="zp-vjs-{{ videoData.id }}" playsinline>{% if videoData.videoSrc %}<source src="{{ videoData.videoSrc }}" type="{{ videoData.videoType }}" />{% endif %}</video>',bitrate:'<option playlist-index="{{ playlistIndex }}" bitrate="{{ bitrate }}" {% if(selected) %}selected{% endif %} >{{ bitrate }} {% if (isHd) %}HD{% endif %}</option>',transitions:'{% set loopSize = 3 if relatedVideosSize != \'small\' else 1 %}<div class="t360-player--transition">{% if transitionType == 0 %}<div class="t360-player--continuous-play" data-sec="5"><div class="t360-player--transition--title">próximo vídeo<br>{{ nextVideo.title }}</div><div class="t360-player--transition--countdown"><svg id="svg" width="130" height="130" viewPort="0 0 130 130" version="1.1" xmlns="http://www.w3.org/2000/svg"><circle r="62" cx="65" cy="65" fill="transparent" stroke-dasharray="565.48" stroke-dashoffset="0"></circle><circle r="62" cx="65" cy="65" fill="transparent" stroke-dasharray="565.48" stroke-dashoffset="0" id="bar">5</circle></svg><div class="t360-player--transition--countdown__value">5</div></div><div class="t360-player--transition--stop"><div class="t360-player--transition--btn-stop" title="Parar"></div> PARAR</div></div>{% endif %}<div class="t360-player--also-watch {{ relatedVideosSize }} {{\'hidden\' if transitionType == 0 else \'\' }}">{% for video in relatedVideos %}{% if loop.index <= loopSize %}<a class="t360-player--also-watch__video" data-channel="{{ video.channel.path }}" data-video-id="{{ video.id }}" href="{{ video.url }}"><div class="t360-player--also-watch__video__image"><img src="{{ video.croppedImage }}"></img><div class="t360-player--also-watch__big-play"></div></div><div class="t360-player--also-watch__title">{{ video.title }}</div></a>{% endif %}{% endfor %}</div></div>',disclaimer:'<div class="t360-player--disclaimer"><div class="t360-player--disclaimer--body">Clicando em ACEITO, voc&#234; declara expressamente que &#233; maior de idade, tem plena capacidade para acessar produtos relacionados a sexo e a conte&#250;dos violentos, deseja ver conte&#250;dos de car&#225;ter sexual e/ou violentos destinados exclusivamente a adultos, n&#227;o considera ofensivos materiais relativos a nus ou outras atividades sexuais ou atividades violentas e abandonar&#225;, imediatamente, os conte&#250;dos caso os considere ofensivos. Declara, por fim, conhecer e aceitar o Aviso Legal de Uso do Portal Terra.<br/><br/>Os conte&#250;dos que voc&#234; se disp&#245;e a ver podem incluir textos, imagens ou outros materiais para adultos. Esses conte&#250;dos s&#227;o dirigidos especificamente para pessoas maiores de idade e que, segundo a legisla&#231;&#227;o aplic&#225;vel, tenham plena capacidade para acessar produtos relacionados a sexo ou a algum conte&#250;do violento. Fica, terminantemente, proibido o acesso a esses materiais por aqueles que n&#227;o cumpram tais requisitos. Caso voc&#234; n&#227;o atenda a algum dos requisitos anteriormente expostos fica obrigado a clicar em N&Atilde;O ACEITO.</div><button class="t360-player--disclaimer--reject">Não aceito</button><button class="t360-player--disclaimer--accept">Aceito</button></div>',error:'<div class="t360-player--error"><h1>OPS!</h1><div class="t360-player--error--body">{{ error }}</div>{% if (showTryAgainButton) %}<button>Tentar novamente</button>{% endif %}</div>',shareMenu:'<div class="t360-player--menu">{% if duration != -1 %}<div class="t360-player--menu__duration"><span class="icon icon-solid icon-color-white icon-play icon-12"></span><span class="t360-player--duration__time">{{ duration }}</span></div>{% endif %}<div class="t360-player--menu__right"><button class="t360-player--share"><div class="t360-player--share--button"><span class="t360-player--share--icon"></span></div><div class="t360-player--share--menu t360-player--hidden__list"><div class="t360-player--share--menu--title">Compartilhar</div><div class="t360-player--share--starting-time"><input type="checkbox" class="t360-player--share--starting-time--checkbox" id="t360-player-share-checkbox"><label for="t360-player-share-checkbox">Começar em</label><input type="text" class="t360-player--share--starting-time--input" id="t360-player-share-input" disabled></div><ul class="t360-player--share--list"><li class="t360-player--sharebar--item"><a class="icon icon-whatsapp" data-event-label="whatsapp"></a></li><li class="t360-player--sharebar--item"><a class="icon icon-twitter" data-event-label="twitter"></a></li><li class="t360-player--sharebar--item"><a class="icon icon-facebook" data-event-label="facebook"></a></li><li class="t360-player--sharebar--item"><a class="icon icon-pinterest" data-event-label="pinterest"></a></li></ul><div class="t360-player--share--bt-copy link">Copiar Link</div><div class="t360-player--share--bt-copy embed">Copiar Embed</div></div></button><button class="t360-player--pip-close"><span class="icon icon-24 icon-times"></span> </button></div></div>',optionsMenu:'<button class="t360-player--options"><div class="t360-player--options--button"><span class="t360-player--options--icon icon-cog"></span></div><div class="t360-player--options--menu t360-player--hidden__list"><ul class="t360-player--options--list t360-player--list"><li class="t360-player--options--list--title">Controles</li>{% if isIOS %}{% if not isHls %}<li><label for="t360-player-hd-sd">Qualidade:</label><select id="t360-player-hd-sd" class="t360-player--options--select t360-player--options--select--quality"><option playlist-index="HD">HD</option><option playlist-index="SD" selected>SD</option></select></li>{% endif %}{% else %}{% if isHls %}<li><label for="t360-player-quality">Qualidade:</label><select id="t360-player-quality" class="t360-player--options--select t360-player--options--select--quality"><option playlist-index="HD">HD</option></select></li>{% else %}<li><label for="t360-player-hd-sd">Qualidade:</label><select id="t360-player-hd-sd" class="t360-player--options--select t360-player--options--select--quality"><option playlist-index="HD">HD</option><option playlist-index="SD" selected>SD</option></select></li>{% endif %}{% endif %}<li><label for="t360-player-speed">Velocidade de reprodução:</label><select id="t360-player-speed" class="t360-player--options--select t360-player--options--select--speed"><option value="0.5">0.5x</option><option value="1" selected>1x</option><option value="1.5">1.5x</option><option value="2">2x</option></select></li></ul></div></button>',fullscreen:'<button class="t360-player--fullscreen"><span class="t360-player--fullscreen--icon vjs-icon-placeholder"></span></button>'},expects:{properties:{videoId:{type:["number","string"],required:!0},container:{type:"dom",required:!0},height:{type:"number"},fitIn:{type:"boolean",default:!1},onReady:{type:"function"},onError:{type:"function"},autoPlay:{type:"boolean",default:!1},autoLoad:{type:"boolean",default:!0},startMuted:{type:"boolean",default:!1},isEmbedded:{type:"boolean",default:!0},useLowestBitrate:{type:"boolean",default:!1},clicked:{type:"boolean",default:!1},context:{type:"string",default:null},metricScenario:{type:"string",default:"autoplay"},debug:{type:"boolean",default:!1},overrideClass:{type:"string",default:null},overrideVideoUrl:{type:"string",default:null},isLive:{type:"boolean",default:!0},poster:{type:"string",default:null},prePoster:{type:"string",default:null},shareURL:{type:"string",default:null},controls:{type:"boolean",default:!0},loop:{type:"boolean",default:!1},kw:{type:"string",default:null},aspectRatio:{type:"string",default:"16:9"},advertise:{type:"object",properties:{tag:{type:"string"},tgmKey:{type:"string"},enabled:{type:"boolean",default:!0},overrideUrl:{type:"string"}},default:{enabled:!0}},onlyAdvertise:{type:"boolean",default:!1},startsAt:{type:"number"},metricVideoType:{type:"string"}}},setup:function(__STATIC_PUBLIC,PUBLIC,__shared){(STATIC_PUBLIC=__STATIC_PUBLIC).CONTINUOUS_PLAY=0,STATIC_PUBLIC.RELATED_LIST=1,STATIC_PUBLIC.states={},__shared.states={},STATIC_PUBLIC.instances=[],STATIC_PUBLIC.getInstances=function(){return STATIC_PUBLIC.instances},pkg.utils.make.observable(STATIC_PUBLIC.states),pkg.utils.make.observable(__shared.states),__shared.states.on("ended",function(a){STATIC_PUBLIC.states.set("ended",a)}),__shared.states.on("nextVideo",function(a){STATIC_PUBLIC.states.set("nextVideo",a)}),__shared.dependencies.mod.videojs.use("*",function(player){return{callPlay:function(){return console.info("Player --\x3e callPlay"),player._data.advertise.enabled&&player._PRIVATE.firstPlay?(console.info("Player --\x3e callPlay - loadAdvertise"),player._PRIVATE.firstPlay=!1,player._PRIVATE.loadAdvertise(),player._PRIVATE.middlewareAdMode=!0,__shared.dependencies.mod.videojs.middleware.TERMINATOR):player._PRIVATE.middlewareAdMode?(player._PRIVATE.adsManager&&(player._PRIVATE.isPaused?(player._PRIVATE.adsManager.resume(),player._PRIVATE.isPaused=!1,player._PRIVATE.videojsPlayer.trigger("play")):(player._PRIVATE.adsManager.pause(),player._PRIVATE.isPaused=!0,player._PRIVATE.videojsPlayer.trigger("pause"))),__shared.dependencies.mod.videojs.middleware.TERMINATOR):void(player._PRIVATE.removeTransition&&player._PRIVATE.removeTransition())}}})},init:function(dataParam,__shared){var data={},dataIndex;for(dataIndex in dataParam)dataParam.hasOwnProperty(dataIndex)&&(data[dataIndex]=dataParam[dataIndex]);data.height=data.height||STATIC_PRIVATE_defaultHeight;var PUBLIC=this,PRIVATE={els:{},translations:this.l10n,state:{},firstPlay:!0,firstPlayVideo:!0,isEmbedded:data.isEmbedded,isLive:data.isLive,isHls:!1,isRerun:!1,isCasting:!1,deviceType:pkg.context.platform.type,middlewareAdMode:!1,autoPip:data.autoPip,isRelatedVideo:data.isRelatedVideo,continuePip:data.continuePip};PUBLIC.api={},PRIVATE.canonizeFeed=function(feedData){function generateFallbackPosterURL(){return STATIC.posterUrl.replace("#VIDEO_ID#",videoId).replace(imgFilter,"").replace("#HEIGHT#",data.height).replace(thumbToken,feedData.playlist.content[updateImages])}function fixOldCropper(url){var result,oldUrlRegex,newResolution,result,parametersRegex;return result=/sdp\.terra\.com\.br\/thumbox\/free\/cnt[\d]*_w[\d]*_h[\d]*_[\d]*\.jpg/.test(url)?url.replace(/_w[\d]*_h[\d]*_/,newResolution="_w0_h0_"):(parametersRegex=/&w=[\d]*&h=[\d]*/,url.replace("p1.trrsf.com/image/get?src=","").replace(parametersRegex,""))}var pl=feedData.playlist,videoId=pl.content.id.toString();pl.content.parts&&(videoId=pl.content.parts[0].id.toString());var updateImages="last_update_images",allowEmbed="allow_embed",availableWidth="is_white_label",channelPath="white_label_name",videoData={id:pl.content.id,videoId:videoId,link:data.shareURL||pl.content.url||STATIC.videoLink.replace("#VIDEO_ID#",pl.content.id.toString()),embed:STATIC.embedString.replace("#VIDEO_ID#",pl.content.id.toString()),category:feedData.category,isStreaming:pl.content.isstreaming,streamingUrl:pl.content.urlsource,lastUpdateImages:pl.content[updateImages],title:pl.content.title,duration:pl.content.totalduration,type:pl.content.type,provider:{allowEmbed:pl.content.provider.allow_embed,id:pl.content.provider.id,title:pl.content.provider.title,audience:pl.content.provider.audience},vendor:pl.content.vendor,channel:{id:pl.content.channel.id,isWhiteLabel:pl.content.channel[availableWidth],whiteLabel:pl.content.channel[channelPath],title:pl.content.channel.title,class:data.overrideClass||pl.content.channel.class,hidden:pl.content.channel.hidden,path:pl.content.channel.path},bitrates:[],isLive:pl.content.isstreaming,metrics:pl.content.metrics,adTag:pl.advertisement.tag,adFrequency:pl.advertisement.frequency,referer:feedData.referrer,canShare:!1,timestamps:pl.content.timestamps,author:Array.isArray(pl.content.authors)&&0<pl.content.authors.length?pl.content.authors[0]:{}},availableWidth={},channelPath,fixedUrl,regex,availableWidth,posterCropperUrl,fixedUrl,availableWidth,posterCropperUrl,posterCropperUrl;if(videoData.channel&&videoData.channel.path?availableWidth=PRIVATE.getInfoPath(videoData.channel.path):videoData.metrics.uvsystem&&(channelPath=videoData.metrics.uvsystem.replace("br.","").split("."),availableWidth.channel=channelPath[0]||"",availableWidth.subchannel=channelPath[1]||"",availableWidth.channeldetail=videoData.metrics.uvtag),videoData.infoPath=availableWidth,pl.content.channel.hidden||!videoData.provider.allowEmbed?videoData.canShare=!1:videoData.canShare=!0,PRIVATE.poster?videoData.poster=PRIVATE.poster:fixedUrl=pl.content.image,fixedUrl?1<(availableWidth=fixedUrl.match(/http[s]?:\/\/(.*)/)).length?(fixedUrl=fixOldCropper(availableWidth[1]),posterCropperUrl=PRIVATE.playerContainer&&0<PRIVATE.playerContainer.offsetWidth?(availableWidth=PRIVATE.playerContainer.firstElementChild.offsetWidth,posterCropperUrl=PRIVATE.playerContainer.firstElementChild.offsetHeight,Math.floor(availableWidth/9*16)!=posterCropperUrl&&Math.floor(availableWidth/16*9)!=posterCropperUrl&&(0<posterCropperUrl&&Math.floor(availableWidth/16*9)<=posterCropperUrl?posterCropperUrl=Math.floor(availableWidth/16*9):availableWidth=Math.floor(posterCropperUrl/9*16)),"https://p2.trrsf.com/image/fget/cf/"+availableWidth+"/"+posterCropperUrl+"/"):STATIC.posterCropperUrl,videoData.poster=posterCropperUrl+fixedUrl):videoData.poster=generateFallbackPosterURL():videoData.poster||(videoData.poster=generateFallbackPosterURL()),pl.content.parts&&0<pl.content.parts.length)for(var i=0;i<pl.content.parts[0].mmedias.length;i++){var mmedia=pl.content.parts[0].mmedias[i];mmedia.id&&videoData.bitrates.push({bitrate:mmedia.bitrate,quality:mmedia.quality_group,fileName:mmedia.id.toString()+"."+mmedia.type,type:mmedia.type,width:mmedia.width,height:mmedia.height,url:mmedia.url,hd:4==mmedia.quality_group})}return videoData.bitrates&&0<videoData.bitrates.length&&(videoData.ratio=videoData.bitrates[0].width/videoData.bitrates[0].height),videoData.videoSrc=PRIVATE.getPlayUrl(videoData),videoData},PRIVATE.restoreVolumeValues=function(){var finalVolume=80,finalMuted=!1;data.startMuted&&(finalMuted=!0),PRIVATE.restoredVolume=PRIVATE.lastVolume=80,PRIVATE.restoredMuted=PRIVATE.muted=finalMuted},PRIVATE.setVolumeFromRestoredValues=function(){var setVolume=100;"number"==typeof PRIVATE.restoredVolume&&(setVolume=PRIVATE.restoredVolume);var setMuted=!1;"boolean"==typeof PRIVATE.restoredMuted&&(setMuted=PRIVATE.restoredMuted),PRIVATE.muted=setMuted,PRIVATE.lastVolume=setVolume,setMuted?PRIVATE.setVolume(0):PUBLIC.api.setVolume(setVolume)},PRIVATE.setPlayerState=function(stateName,stateValue){PRIVATE.state.set(stateName,stateValue),null==stateValue?PRIVATE.els.player.removeAttribute(stateName):PRIVATE.els.player.setAttribute(stateName,stateValue)},PRIVATE.hasHLSPlaylist=function(){if(PRIVATE.videojsPlayer){var tech=PRIVATE.videojsPlayer.tech("hls");return tech&&tech.vhs&&tech.vhs.playlists&&tech.vhs.playlists.main&&tech.vhs.playlists.main.playlists.length}return!1},PRIVATE.setLowestBitrate=function(){var lowestBitrateBySize=90,isHomeOrSubject;if(("home"==pkg.context.publisher.get("template")||"subject"==pkg.context.publisher.get("template"))&&(lowestBitrateBySize=320<PRIVATE.els.videoEl.parentElement.offsetWidth?240:144),PRIVATE.hasHLSPlaylist()){for(var tech=PRIVATE.videojsPlayer.tech("hls"),lowestBitratePlaylistIndex=-1,lowestBitrate=1/0,i=0;i<tech.vhs.playlists.main.playlists.length;i++){var playlist=tech.vhs.playlists.main.playlists[i];if(lowestBitrate>playlist.attributes.BANDWIDTH&&(lowestBitrate=playlist.attributes.BANDWIDTH,lowestBitratePlaylistIndex=i),playlist.attributes.RESOLUTION&&playlist.attributes.RESOLUTION.height===lowestBitrateBySize){lowestBitratePlaylistIndex=i;break}}PRIVATE.setBitrateQuality(lowestBitratePlaylistIndex)}},PRIVATE.onClickBitrate=function(targetDom){var targetDom=targetDom.target[targetDom.target.selectedIndex];PRIVATE.setBitratePlaylist(targetDom),PRIVATE.state.set("userInteraction",!0)},PRIVATE.isFullscreenHelper=function(){return PRIVATE.videojsPlayer.isFullscreen()||PRIVATE.fullscreenAd},PRIVATE.shareClipboard=function(link,target){var originalText=target.innerHTML;target.innerHTML="Copiando...",navigator.clipboard.writeText(link).then(function(){target.innerHTML="Copiado!"},function(){target.innerHTML="Erro ao copiar!"}).finally(function(){setTimeout(function(){target.innerHTML=originalText},3e3)})},PRIVATE.setBitrateQuality=function(playlistIndex){var elem,elem;-1<playlistIndex&&PRIVATE.bitrates&&0<PRIVATE.bitrates.length&&PRIVATE.bitrates[playlistIndex]?elem=PRIVATE.bitrates[playlistIndex].height+"p":-1==playlistIndex&&(elem="AUTO"),(elem=PRIVATE.els.bitratesTooltip.querySelector("option[bitrate='"+elem+"']"))&&PRIVATE.setBitratePlaylist(elem)},PRIVATE.setBitratePlaylist=function(elem){var tech;PRIVATE.videojsPlayer.tech("hls").vhs.terraSelectedPlaylistIndex=parseInt(elem.getAttribute("playlist-index"));for(var i=0;i<PRIVATE.els.bitrates.length;i++)PRIVATE.els.bitrates[i].removeAttribute("selected");elem.setAttribute("selected","")},PRIVATE.setupHdSdMenu=function(){var elem;!PRIVATE.videojsPlayer||(elem=PRIVATE.videojsPlayer.el_.querySelector("#t360-player-hd-sd"))&&elem.addEventListener("change",function(clickEvent){var sdOrHd;"HD"==clickEvent.target[clickEvent.target.selectedIndex].getAttribute("playlist-index")?PUBLIC.api.enableHD():PUBLIC.api.disableHD()})},PRIVATE.setupBitratesMenu=function(){function addBitrate(renderedBitrate){PRIVATE.els.bitratesTooltip.appendChild(renderedBitrate),PRIVATE.els.bitrates.push(PRIVATE.els.bitratesTooltip.lastChild)}if(PRIVATE.hasHLSPlaylist()){var tech=PRIVATE.videojsPlayer.tech("hls");PRIVATE.bitrates=[];for(var index=0;index<tech.vhs.playlists.main.playlists.length;index++){var playlist=tech.vhs.playlists.main.playlists[index];PRIVATE.bitrates.push({bitrate:Math.floor(playlist.attributes.BANDWIDTH/1e3),width:playlist.attributes.RESOLUTION.width,height:playlist.attributes.RESOLUTION.height,index:index})}if(PRIVATE.bitrates.sort(function(a,b){return a.bitrate<b.bitrate}),PRIVATE.els.bitratesTooltip){for(var strBitrate in PRIVATE.els.bitrates=[],PRIVATE.els.bitratesTooltip.innerHTML="",PRIVATE.bitrates){var bitrate=PRIVATE.bitrates[strBitrate],strBitrate=bitrate.height.toString()+"p";addBitrate(PUBLIC.templates.render("bitrate",{bitrate:strBitrate,playlistIndex:bitrate.index,selected:tech.vhs.terraSelectedPlaylistIndex===bitrate.index,isHd:720<=bitrate.height}))}addBitrate(PUBLIC.templates.render("bitrate",{bitrate:"AUTO",playlistIndex:-1,selected:"number"!=typeof tech.vhs.terraSelectedPlaylistIndex,isHd:!1})),PRIVATE.els.bitratesTooltip.addEventListener("change",PRIVATE.onClickBitrate)}}else{var elemLiBirates;!PRIVATE.els.bitratesTooltip||(elemLiBirates=PRIVATE.els.bitratesTooltip.parentNode)&&elemLiBirates.parentNode&&elemLiBirates.parentNode.removeChild(elemLiBirates)}},PRIVATE.getLatinDmpParameters=function(){var tags="";try{if("function"==typeof window.getAudCookie)for(var audCookie,audCookie=(audCookie=window.getAudCookie()).split(";"),i=0;i<audCookie.length;i++)tags+="&"+audCookie[i]}catch(err){tags=""}return tags},PRIVATE.resize=function(){var isFullScreen=PRIVATE.videojsPlayer.isFullscreen(),targetWidth=PRIVATE.playerContainer.offsetWidth,targetHeight=PRIVATE.playerContainer.offsetHeight,viewMode;PRIVATE.els&&PRIVATE.els.player&&(isFullScreen||("16:9"==data.aspectRatio&&(targetHeight=targetWidth/16*9,document.body.offsetHeight<targetHeight&&(targetHeight=document.body.offsetHeight,targetWidth=document.body.offsetHeight/9*16)),targetWidth<300?PRIVATE.els.player.setAttribute("data-size","toosmall"):targetWidth<480?PRIVATE.els.player.setAttribute("data-size","300"):targetWidth<=620?PRIVATE.els.player.setAttribute("data-size","480"):targetWidth<900?PRIVATE.els.player.setAttribute("data-size","620"):PRIVATE.els.player.setAttribute("data-size","1280"),PRIVATE.els.player.style.height=targetHeight+"px",PRIVATE.els.player.style.width=targetWidth+"px"),PRIVATE.adsManager&&(viewMode=google.ima.ViewMode.NORMAL,isFullScreen&&(targetWidth=screen.width,targetHeight=screen.height,viewMode=google.ima.ViewMode.FULLSCREEN),PRIVATE.currentAd&&(PRIVATE.currentAd.isLinear()?PRIVATE.adsManager.resize(targetWidth,targetHeight,viewMode):PRIVATE.resizeNonlinear())))},PRIVATE.resizeNonlinear=function(){var overlayHeight=PRIVATE.currentAd.getHeight()+20;PRIVATE.adsManager.resize(PRIVATE.els.videoEl.parentElement.offsetWidth,overlayHeight,google.ima.ViewMode.NORMAL),PRIVATE.els.adContainer.style.height=overlayHeight+"px"},PRIVATE.pqs=function(qr,all){return all?[].slice.call(PRIVATE.els.player.querySelectorAll(qr)):PRIVATE.els.player.querySelector(qr)},PRIVATE.showDisclaimer=function(){function removeDisclaimer(){PRIVATE.els.player.removeChild(PRIVATE.els.player.querySelector(".t360-player--disclaimer"))}PRIVATE.els.player.appendChild(PUBLIC.templates.render("disclaimer")),PRIVATE.els.btnDisclaimerReject=PRIVATE.els.player.querySelector(".t360-player--disclaimer--reject"),PRIVATE.els.btnDisclaimerAccept=PRIVATE.els.player.querySelector(".t360-player--disclaimer--accept"),PRIVATE.els.btnDisclaimerAccept.addEventListener("click",function(){PRIVATE.disclaimerAccepted=!0,removeDisclaimer(),PRIVATE.loadVideoOrPreroll(),PRIVATE.els.player.querySelector(".vjs-big-play-button").style.display="none"}),PRIVATE.els.btnDisclaimerReject.addEventListener("click",function(){window.location.href="https://terra.com.br"})},PRIVATE.openCloseOptionsMenu=function(){var list=PRIVATE.videojsPlayer.el_.querySelector(".t360-player--options--menu");PRIVATE.shareOpen&&PRIVATE.openCloseShareMenu(),list.style.display=PRIVATE.optionsOpen?"":"block",PRIVATE.optionsOpen=!PRIVATE.optionsOpen},PRIVATE.openCloseShareMenu=function(){var list=PRIVATE.videojsPlayer.el_.querySelector(".t360-player--share--menu"),icon=PRIVATE.videojsPlayer.el_.querySelector(".t360-player--share--icon"),elemShareTime=PRIVATE.videojsPlayer.el_.querySelector(".t360-player--share--starting-time");PRIVATE.els.shareMenuInput.value=PRIVATE.formatSecondsToReadableTime(PRIVATE.videojsPlayer.currentTime()),PRIVATE.videoData.isLive&&elemShareTime&&(elemShareTime.style.display="none"),navigator&&navigator.share&&"mob"===PRIVATE.deviceType?(navigator.share({title:PRIVATE.videoData.title,url:PRIVATE.videoData.link}),window.tga.send("send","event","player","share native",unescape(PRIVATE.videoData.title),{dimension9:"terra"})):(PRIVATE.optionsOpen&&PRIVATE.openCloseOptionsMenu(),list.style.display=PRIVATE.shareOpen?"":"block",icon.classList.toggle("close"),PRIVATE.shareOpen=!PRIVATE.shareOpen,PRIVATE.shareOpen&&window.tga.send("send","event","player","share",unescape(PRIVATE.videoData.title),{dimension9:"terra"}))},PRIVATE.shareFunctions={whatsapp:function(urlWhatsApp){var urlWhatsApp;urlWhatsApp.stopPropagation(),urlWhatsApp="mob"===PRIVATE.deviceType?"whatsapp://send?text="+PRIVATE.videoData.link+"%3Futm_source%3DWhatsapp%26utm_medium%3DSOCIAL":"https://web.whatsapp.com/send?text="+PRIVATE.videoData.link+"%3Futm_source%3DWhatsapp%26utm_medium%3DSOCIAL",window.open(urlWhatsApp),window.tga.send("send","event","article","share","whatsapp")},facebook:function(event){event.stopPropagation(),window.open("http://www.facebook.com/sharer/sharer.php?u="+PRIVATE.videoData.link,"_blank","width=520,height=420,top="+(screen.height-420)/2+",left="+(screen.width-520)/2,"Facebook"),window.tga.send("send","event","article","share","facebook")},twitter:function(event){event.stopPropagation(),window.open("https://twitter.com/intent/tweet?text="+PRIVATE.videoData.title+"&url="+PRIVATE.videoData.link,"_blank","width=520,height=420,top="+(screen.height-420)/2+",left="+(screen.width-520)/2,"Twitter"),window.tga.send("send","event","article","share","twitter")},pinterest:function(event){event.stopPropagation(),window.open("http://www.pinterest.com/pin/create/button/?url="+PRIVATE.videoData.link+"&media="+PRIVATE.videoData.poster+"&description="+PRIVATE.videoData.title,"_blank","width=520,height=420,top="+(screen.height-420)/2+",left="+(screen.width-520)/2,"Pinterest"),window.tga.send("send","event","article","share","pinterest")}},PRIVATE.treatPlayerError=function(error){console.log(error);var templateParams=error,templateParams="geoblock"===(templateParams="string"!=typeof error?"Erro":error)?{error:"Esse vídeo não está disponível em seu país",showTryAgainButton:!1}:{error:templateParams,showTryAgainButton:!0};if(PRIVATE.destroyAdElements(),PRIVATE.els.player.appendChild(PUBLIC.templates.render("error",templateParams)),PRIVATE.els.btnTryAgain=PRIVATE.els.player.querySelector(".t360-player--error button"),PRIVATE.els.btnTryAgain&&(PRIVATE.els.btnTryAgain.addEventListener("click",function(){zaz.use(function(pkg){pkg.require(["app.player"],function(Player){var newData=data;newData.autoPlay=!0,window.p1=new Player(newData)})})}),data&&data.onError))try{data.onError(error)}catch(e){}},PRIVATE.destroy=function(){return console.info("Destroying player with id #",data.videoId),new Promise(function(resolve,reject){PRIVATE.stopAllTimers(),document.pictureInPictureElement&&document.exitPictureInPicture(),PRIVATE.adsManager&&(PRIVATE.adsLoader.destroy(),PRIVATE.adsManager.stop(),PRIVATE.adsManager.destroy()),setTimeout(function(){"object"!=typeof PRIVATE.videojsPlayer||PRIVATE.videojsPlayer.isDisposed()||PRIVATE.videojsPlayer.dispose(),PRIVATE.cleanUp(),resolve()},200);var instancesIndex=STATIC_PUBLIC.instances.indexOf(PUBLIC);0<=instancesIndex&&STATIC_PUBLIC.instances.splice(instancesIndex,1)})},PRIVATE.cleanUp=function(){PRIVATE.playerContainer=data.container,PRIVATE.playerContainer.innerHTML=""},PRIVATE.stopAllTimers=function(){PRIVATE.adTimeoutTimer&&(clearInterval(PRIVATE.adTimeoutTimer),PRIVATE.adTimeoutTimer=null),PRIVATE.adProgressTimer&&(clearInterval(PRIVATE.adProgressTimer),PRIVATE.adProgressTimer=null),PRIVATE.progressTimer&&(clearInterval(PRIVATE.progressTimer),PRIVATE.progressTimer=null),PRIVATE.progressTimerAD&&(clearInterval(PRIVATE.progressTimerAD),PRIVATE.progressTimerAD=null),PRIVATE.transitionTimer&&(clearInterval(PRIVATE.transitionTimer),PRIVATE.transitionTimer=null)},PRIVATE.allowAutoPlay=function(eventType){return new Promise(function(resolve,reject){var playPromise=PRIVATE.els.videoElement.play();void 0!==playPromise?playPromise.then(function(){"stop"==eventType?(PRIVATE.els.videoElement.pause(),PRIVATE.els.videoElement.currentTime=0):PRIVATE.els.videoElement.play(),resolve()}).catch(function(e){window.tga.send("send","event","player","error",e.message,{dimension9:"terra"}),reject()}):reject()})},PRIVATE.isVideoState=function(){var isVideoState=0==data.advertise.enabled,isVideoState;return isVideoState=isVideoState||(!PRIVATE.isIOS||!PRIVATE.state.get("advertising")||"nonlinear"==PRIVATE.state.get("advertising"))},PRIVATE.getPlayUrl=function(results,quality){var playUrl,results;return results.isStreaming?playUrl=results.streamingUrl:("number"!=typeof quality&&(quality=2),(results=results.bitrates.filter(function(element){return element.quality==quality})).length&&(playUrl=results[0].url)),playUrl},PRIVATE.loadedMenuQuality=!1,PRIVATE.loadMenuQuality=function(){if(PRIVATE.loadedMenuQuality)return!1;var tech;PRIVATE.loadedMenuQuality=!0,PRIVATE.isHLS?((tech=PRIVATE.videojsPlayer.tech("hls")).vhs&&(tech.vhs.oldSelectPlaylist=tech.vhs.selectPlaylist,tech.vhs.selectPlaylist=function(){return"number"==typeof this.terraSelectedPlaylistIndex&&0<=this.terraSelectedPlaylistIndex?this.playlists.main.playlists[this.terraSelectedPlaylistIndex]:this.oldSelectPlaylist()}),PRIVATE.setupBitratesMenu(),data.useLowestBitrate&&PRIVATE.setLowestBitrate()):PRIVATE.setupHdSdMenu()},PRIVATE.getTimeStringInSeconds=function(timeString){try{var time=timeString.split(":");if(time.forEach(function(x,i,self){self[i]=parseInt(x)}),1===time.length)return time[0];if(2===time.length)return 60*time[0]+time[1];if(3===time.length)return 3600*time[0]+60*time[1]+time[2]}catch(error){console.error(error)}},PRIVATE.formatSecondsToReadableTime=function(seconds){var time=[seconds/3600,seconds/60%60,seconds%60],result=[];return time.forEach(function(t,i){0===i&&0===Math.floor(t)||(1===i&&1<=time[0]||2===i?result.push(String(Math.floor(t)).padStart(2,"0")):result.push(Math.floor(t)))}),result.join(":")},PRIVATE.addQueryStringParamToVideoUrl=function(param,value){var concatChar=PRIVATE.videoData.link,splitParam=new RegExp("[?&]"+param+"=[^&]*","g"),urlParam=concatChar.match(splitParam)?concatChar.match(splitParam)[0]:null,splitParam,concatChar;-1!==concatChar.indexOf(urlParam)?(splitParam=urlParam.split("="),PRIVATE.videoData.link=value?concatChar.replace(urlParam,splitParam[0]+"="+value):concatChar.replace(urlParam,"")):(concatChar=-1===concatChar.indexOf("?")?"?":"&",PRIVATE.videoData.link+=concatChar+param+"="+value)},PRIVATE.sanitizeTimestampString=function(sanitized){var sanitized,splitted=sanitized.split(":"),sanitized=splitted.length,sanitized=1===sanitized?PRIVATE.formatSecondsToReadableTime(splitted[0]):3<sanitized||splitted.includes("")?0:(splitted.forEach(function(x,i){x=x.replace(/\D+/,""),splitted[i]=2<x.length?0:x}),PRIVATE.formatSecondsToReadableTime(PRIVATE.getTimeStringInSeconds(splitted.join(":"))));return sanitized},PRIVATE.canAutoplay=function(){var VIDEO=new Blob([new Uint8Array([0,0,0,28,102,116,121,112,105,115,111,109,0,0,2,0,105,115,111,109,105,115,111,50,109,112,52,49,0,0,0,8,102,114,101,101,0,0,2,239,109,100,97,116,33,16,5,32,164,27,255,192,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,55,167,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,112,33,16,5,32,164,27,255,192,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,55,167,128,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,112,0,0,2,194,109,111,111,118,0,0,0,108,109,118,104,100,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,232,0,0,0,47,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,1,236,116,114,97,107,0,0,0,92,116,107,104,100,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,47,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,101,100,116,115,0,0,0,28,101,108,115,116,0,0,0,0,0,0,0,1,0,0,0,47,0,0,0,0,0,1,0,0,0,0,1,100,109,100,105,97,0,0,0,32,109,100,104,100,0,0,0,0,0,0,0,0,0,0,0,0,0,0,172,68,0,0,8,0,85,196,0,0,0,0,0,45,104,100,108,114,0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0,0,0,1,15,109,105,110,102,0,0,0,16,115,109,104,100,0,0,0,0,0,0,0,0,0,0,0,36,100,105,110,102,0,0,0,28,100,114,101,102,0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1,0,0,0,211,115,116,98,108,0,0,0,103,115,116,115,100,0,0,0,0,0,0,0,1,0,0,0,87,109,112,52,97,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,2,0,16,0,0,0,0,172,68,0,0,0,0,0,51,101,115,100,115,0,0,0,0,3,128,128,128,34,0,2,0,4,128,128,128,20,64,21,0,0,0,0,1,244,0,0,1,243,249,5,128,128,128,2,18,16,6,128,128,128,1,2,0,0,0,24,115,116,116,115,0,0,0,0,0,0,0,1,0,0,0,2,0,0,4,0,0,0,0,28,115,116,115,99,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,2,0,0,0,1,0,0,0,28,115,116,115,122,0,0,0,0,0,0,0,0,0,0,0,2,0,0,1,115,0,0,1,116,0,0,0,20,115,116,99,111,0,0,0,0,0,0,0,1,0,0,0,44,0,0,0,98,117,100,116,97,0,0,0,90,109,101,116,97,0,0,0,0,0,0,0,33,104,100,108,114,0,0,0,0,0,0,0,0,109,100,105,114,97,112,112,108,0,0,0,0,0,0,0,0,0,0,0,0,45,105,108,115,116,0,0,0,37,169,116,111,111,0,0,0,29,100,97,116,97,0,0,0,1,0,0,0,0,76,97,118,102,53,54,46,52,48,46,49,48,49])],{type:"video/mp4"}),elemVideo=document.createElement("video"),timeout=500;return elemVideo.src=URL.createObjectURL(VIDEO),elemVideo.setAttribute("playsinline","playsinline"),new Promise(function(resolve){var timeoutId,playResult=elemVideo.play(),sendOutput=function sendOutput(result){var error=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;elemVideo.remove(),elemVideo.srcObject=null,clearTimeout(timeoutId),resolve({result:result,error:error})},timeoutId=setTimeout(function(){sendOutput(!1,new Error("Timeout 500 ms has been reached"))},500);void 0!==playResult?playResult.then(function(){return sendOutput(!0)}).catch(function(playError){return sendOutput(!1,playError)}):sendOutput(!1)})},PRIVATE.displayCloseDomPipButton=function(){PRIVATE.els.btnCloseDomPip.style.display="block"},PRIVATE.removeCloseDomPipButton=function(){PRIVATE.els.btnCloseDomPip.style.display=""},PRIVATE.eventHandlerNativePipTurnedOff=function(){PRIVATE.state.set("native-pip",!1)},PRIVATE.eventHandlerNativePipTurnedOn=function(){PRIVATE.state.set("native-pip",!0)},PRIVATE.getInfoPath=function(lastItem){var infoPath=[];0<(infoPath=""!=(lastItem=lastItem.replace("Brasil.",""))?lastItem.split("."):infoPath).length&&(infoPath[0]=infoPath[0].replaceAll("-",""));var lastItem=2<infoPath.length?infoPath.length-1:2;return{channel:0<infoPath.length?infoPath[0]:"",subchannel:1<infoPath.length?infoPath[1]:"",channeldetail:2<infoPath.length?infoPath[lastItem]:"",breadcrumb:infoPath.join(".")}},PRIVATE.loadVideoChapters=function(){var videoTimestamps=PRIVATE.videoData.timestamps,elemChapterMarkerWrapper,elemMouseDisplay,elemMouseDisplayTime,updateMouseDisplayPosition,toggleActiveMarker,updateMouseDisplayTitle,chapterMarkerTouchHandler,endTouch;videoTimestamps&&videoTimestamps.length&&((elemChapterMarkerWrapper=document.createElement("div")).className="vjs-chapter-marker-wrapper",PRIVATE.els.progressBar.style.backgroundColor="initial",PRIVATE.els.progressBar.appendChild(elemChapterMarkerWrapper),"0:00"!==videoTimestamps[0].value&&videoTimestamps.unshift({title:"Introdução",value:"0:00"}),"mob"===PRIVATE.deviceType&&(elemMouseDisplay=document.createElement("div"),elemMouseDisplayTime=document.createElement("div"),elemMouseDisplay.className="vjs-mouse-display",elemMouseDisplayTime.className="vjs-time-tooltip",elemMouseDisplay.appendChild(elemMouseDisplayTime),PRIVATE.els.progressBar.appendChild(elemMouseDisplay),updateMouseDisplayPosition=function(){var subjectWidth=elemMouseDisplayTime.clientWidth,x=PRIVATE.progressBarTouchOffset,referenceRects=PRIVATE.progressBarRects,finalPosition;x+subjectWidth/2>=referenceRects.right-referenceRects.left?finalPosition=referenceRects.right-referenceRects.left-subjectWidth/2:x-subjectWidth/2<=referenceRects.left&&(finalPosition=subjectWidth/2),elemMouseDisplay.style.left=(finalPosition||x)+"px"},toggleActiveMarker=function(current){PRIVATE.pqs(".vjs-chapter-marker.active-touch")&&PRIVATE.pqs(".vjs-chapter-marker.active-touch").classList.remove("active-touch"),current.classList.add("active-touch")},updateMouseDisplayTitle=function(refMarker){var currentTime=PRIVATE.videojsPlayer.currentTime(),refMarkerStartTime=parseFloat(refMarker.dataset.start),refMarkerEndTime=parseFloat(refMarker.dataset.end);if(refMarkerStartTime<=currentTime&&currentTime<=refMarkerEndTime)return toggleActiveMarker(refMarker),void(elemMouseDisplayTime.dataset.content=refMarker.dataset.chapterTitle);PRIVATE.chapterMarkers.forEach(function(marker){var markerStartTime=parseFloat(marker.dataset.start),markerEndTime=parseFloat(marker.dataset.end);markerStartTime<=currentTime&&currentTime<=markerEndTime&&(toggleActiveMarker(marker),elemMouseDisplayTime.dataset.content=marker.dataset.chapterTitle)})},chapterMarkerTouchHandler=function(xOffset){PRIVATE.chapterMarkers||(PRIVATE.chapterMarkers=PRIVATE.pqs(".vjs-chapter-marker",!0)),elemMouseDisplay.style.opacity=1,PRIVATE.progressBarTouchOffset=xOffset-PRIVATE.progressBarRects.left,elemMouseDisplayTime.innerText=PRIVATE.formatSecondsToReadableTime(PRIVATE.videojsPlayer.currentTime()),updateMouseDisplayPosition()},endTouch=function(){PRIVATE.els.progressBar.parentElement.classList.remove("active-touch"),PRIVATE.pqs(".vjs-chapter-marker.active-touch").classList.remove("active-touch"),elemMouseDisplay.style.opacity=0}),videoTimestamps.forEach(function(t,nextTimestampValue,self){var timeInSeconds=PRIVATE.getTimeStringInSeconds(t.value),elemChapterMarker=document.createElement("div"),leftOffsetPosCalc=timeInSeconds/PRIVATE.videoData.duration*100,widthCalc,nextTimestampValue,widthCalc;elemChapterMarker.className="vjs-chapter-marker",elemChapterMarker.style.left=leftOffsetPosCalc.toFixed(2)+"%",elemChapterMarker.setAttribute("data-start",timeInSeconds),elemChapterMarker.setAttribute("data-chapter-title",t.title),void 0!==self[nextTimestampValue+1]?(widthCalc=((nextTimestampValue=PRIVATE.getTimeStringInSeconds(self[nextTimestampValue+1].value))-timeInSeconds)/PRIVATE.videoData.duration*100,elemChapterMarker.style.width="calc("+widthCalc.toFixed(2)+"% - 1px)",elemChapterMarker.setAttribute("data-end",nextTimestampValue-1)):(widthCalc=(PRIVATE.videoData.duration-timeInSeconds)/PRIVATE.videoData.duration*100,elemChapterMarker.style.width=widthCalc.toFixed(2)+"%",elemChapterMarker.setAttribute("data-end",PRIVATE.videoData.duration)),"mob"===PRIVATE.deviceType?(elemChapterMarker.addEventListener("touchstart",function(evt){PRIVATE.progressBarRects=PRIVATE.els.progressBar.getClientRects()[0],PRIVATE.els.progressBar.parentElement.classList.add("active-touch"),toggleActiveMarker(this),elemMouseDisplayTime.dataset.content=this.dataset.chapterTitle,chapterMarkerTouchHandler(evt.touches[0].clientX)}),elemChapterMarker.addEventListener("touchmove",function(evt){chapterMarkerTouchHandler(evt.touches[0].clientX),0<=PRIVATE.progressBarTouchOffset&&PRIVATE.progressBarTouchOffset<=PRIVATE.progressBarRects.width&&updateMouseDisplayTitle(this)}),elemChapterMarker.addEventListener("touchend",endTouch),elemChapterMarker.addEventListener("touchcancel",endTouch)):elemChapterMarker.addEventListener("mouseover",function(evt){PRIVATE.els.mouseDisplayTime.setAttribute("data-content",this.dataset.chapterTitle)}),elemChapterMarkerWrapper.appendChild(elemChapterMarker)}),PRIVATE.videojsPlayer.el().classList.add("vjs-chapters-loaded"))},PRIVATE.bindAutoplayOnView=function(){var isFirstTime=!0,thresholdRatio=.25,rootMargin,handler=function(entry){!0!==PRIVATE.state.get("userInteraction")&&(entry.isIntersecting?PRIVATE.middlewareAdMode&&PRIVATE.adsManager?PRIVATE.adsManager.resume():!PUBLIC.api.isPip()&&isFirstTime?(isFirstTime=!1,PUBLIC.play(),pkg.context.page.trigger("video-autoplay-started",{videoId:PRIVATE.videoId})):0<entry.boundingClientRect.top&&!PRIVATE.state.get("ended")&&!PRIVATE.middlewareAdMode&&PUBLIC.api.play():PRIVATE.middlewareAdMode&&PRIVATE.adsManager&&!PUBLIC.api.isPip()?PRIVATE.adsManager.pause():0<entry.boundingClientRect.top&&PUBLIC.api.pause())},options;PRIVATE.observerPipAutoplay=new IntersectionObserver(function(entries){entries.forEach(handler)},{root:null,rootMargin:"0px 0px 0px 0px",threshold:.25}),PRIVATE.observerPipAutoplay.observe(PRIVATE.els.player)},PRIVATE.bindAutoplayEvents=function setAutoplayEvents(){pkg.context.page.on("video-autoplay-started",function(data){PRIVATE.videoId!=data.videoId&&PUBLIC.api.pause()})},PRIVATE.bindAutoplayRelatedVideo=function(){var thresholdRatio=PRIVATE.isRelatedVideo&&PRIVATE.autopip?.1:.25,rootMargin,handler=function(entry){!0!==PRIVATE.state.get("userInteraction")&&(entry.isIntersecting?PRIVATE.middlewareAdMode&&PRIVATE.adsManager?PRIVATE.adsManager.resume():PUBLIC.play():(PRIVATE.middlewareAdMode&&PRIVATE.adsManager?PRIVATE.adsManager:PUBLIC.api).pause())},options,observer;new IntersectionObserver(function(entries){entries.forEach(handler)},{root:null,rootMargin:"0px 0px 0px 0px",threshold:thresholdRatio}).observe(PRIVATE.els.player)},PRIVATE.bindOptionsMenu=function(){PRIVATE.els.controlsContainer&&data.controls&&(PRIVATE.els.controlsContainer.querySelector(".t360-player--options--button").addEventListener("click",PRIVATE.openCloseOptionsMenu),PRIVATE.els.controlsContainer.querySelector("#t360-player-speed").addEventListener("change",function(ev){PRIVATE.videojsPlayer.playbackRate(+ev.target.value)}))},PRIVATE.bindDomPipScrollEvents=function(){var thresholdRatio=.3;PRIVATE.canBecomePip=!0,pkg.context.page.trigger("pip-video-started",{player:PUBLIC});var options={root:document,rootMargin:"0px 0px 10000px 0px",threshold:.3};PRIVATE.observerPipScrollEvents=new IntersectionObserver(function(entries){entries.forEach(function(bottomAd){var width,width,bottomAd;.3<bottomAd.intersectionRatio?(PRIVATE.els.player.classList.remove("pip-mode"),PRIVATE.els.player.style.bottom="",PRIVATE.els.player.parentElement.style.width="",PRIVATE.resize(),PRIVATE.els.btnPip.style.display="",PRIVATE.removeCloseDomPipButton(),PRIVATE.els.player.removeEventListener("mouseenter",PRIVATE.displayCloseDomPipButton),PRIVATE.els.player.removeEventListener("mouseleave",PRIVATE.removeCloseDomPipButton)):PRIVATE.domPipManuallyClosed||PRIVATE.state.get("ended")||PUBLIC.api.isPaused()||(PRIVATE.els.btnPip.style.display="none","mob"==pkg.context.platform.get("type")?(PRIVATE.displayCloseDomPipButton(),width=256):(width=300,(bottomAd=document.querySelector(".bottom-ad-container"))&&"block"==bottomAd.style.display&&(PRIVATE.els.player.style.bottom="120px"),PRIVATE.els.player.addEventListener("mouseenter",PRIVATE.displayCloseDomPipButton),PRIVATE.els.player.addEventListener("mouseleave",PRIVATE.removeCloseDomPipButton)),PRIVATE.els.player.parentElement.style.width=width+"px",PRIVATE.els.player.classList.add("pip-mode"),PRIVATE.resize(),PRIVATE.state.set("pip-non-native",!0))})},options),PRIVATE.observerPipScrollEvents.observe(PRIVATE.els.player.parentElement),PRIVATE.els.btnCloseDomPip||(PRIVATE.els.btnCloseDomPip=PRIVATE.pqs(".t360-player--pip-close")),PRIVATE.els.btnCloseDomPip.addEventListener("click",function(ev){PRIVATE.shareOpen?PRIVATE.openCloseShareMenu():(ev.stopPropagation(),PRIVATE.domPipManuallyClosed=!0,PUBLIC.api.pause(),PRIVATE.els.player.classList.remove("pip-mode"),PRIVATE.els.btnCloseDomPip.style.display="none",PRIVATE.els.btnPip.style.display="",window.tga.send("send","event","player","pip","close",{dimension9:"terra"}))})},PRIVATE.unobservePip=function(player){PRIVATE.observerPipScrollEvents&&(console.log("Removendo observerPipScrollEvents"),PRIVATE.observerPipScrollEvents.unobserve(player.parentElement)),PRIVATE.observerPipAutoplay&&(console.log("Removendo observerPipAutoplay"),PRIVATE.observerPipAutoplay.unobserve(player))},PRIVATE.closePip=function(){PRIVATE.domPipManuallyClosed=!0,PUBLIC.api.pause(),PRIVATE.els.btnCloseDomPip&&(PRIVATE.els.btnCloseDomPip.style.display="none"),PRIVATE.els.btnPip&&(PRIVATE.els.btnPip.style.display=""),PRIVATE.els.player.classList.remove("pip-mode"),PRIVATE.els.player.style.bottom="",PRIVATE.els.player.parentElement.style.width="",PRIVATE.resize(),PRIVATE.els.player.removeEventListener("mouseenter",PRIVATE.displayCloseDomPipButton),PRIVATE.els.player.removeEventListener("mouseleave",PRIVATE.removeCloseDomPipButton),PRIVATE.unobservePip(PRIVATE.els.player)},PRIVATE.bindVideojsEvents=function(){PRIVATE.videojsPlayer.on("volumechange",function(media){var volume=PRIVATE.videojsPlayer.volume();PRIVATE.videojsPlayer.muted()&&(volume=0),PRIVATE.adsManager&&PRIVATE.adsManager.setVolume(volume),PRIVATE.restoredMuted=!volume}),PRIVATE.videojsPlayer.on("loadedmetadata",function(metadata){PRIVATE.isVideoState()&&(PRIVATE.els.player.classList.remove("t360-player-force-spinner"),PRIVATE.isIOS||PRIVATE.loadMenuQuality())}),PRIVATE.videojsPlayer.on("loadeddata",function(media){PRIVATE.isVideoState()&&(PRIVATE.els.player.classList.remove("t360-player-force-spinner"),PRIVATE.isIOS||PRIVATE.loadMenuQuality(),window.performance&&window.performance.mark&&window.performance.mark("PLAYER_VIDEO_END"))}),PRIVATE.videojsPlayer.on("ended",function(){PRIVATE.isVideoState()&&(PRIVATE.sendMetricsEnd(),PRIVATE.adsLoader&&PRIVATE.adsLoader.contentComplete(),PRIVATE.state.set("ended",!0),__shared.states.set("ended",PUBLIC))}),PRIVATE.videojsPlayer.on("firstplay",function(media){PRIVATE.isVideoState()&&(window.performance&&window.performance.mark&&window.performance.mark("PLAYER_VIDEO_START"),!0===PRIVATE.state.get("userInteraction")&&PUBLIC.api.unmute())}),PRIVATE.videojsPlayer.on("playing",function(media){PRIVATE.state.get("advertising")&&"nonlinear"!=PRIVATE.state.get("advertising")||(PRIVATE.els.player.style.backgroundImage="",PRIVATE.els.player.style.backgroundColor="transparent",PRIVATE.sendMetricsPlay())}),PRIVATE.videojsPlayer.on("touchstart",function(e){PRIVATE.state.set("userInteraction",!0)}),PRIVATE.videojsPlayer.on("click",function(){PRIVATE.state.set("userInteraction",!0)}),PRIVATE.videojsPlayer.on("error",function(error){return PRIVATE.state.get("advertising")?console.warn('videojs raised an error, but will ignore because state is "advertising"'):void PRIVATE.treatPlayerError()}),PRIVATE.videojsPlayer.on("fullscreenchange",function(media){PRIVATE.isHLS&&PRIVATE.setBitrateQuality(-1),PRIVATE.els.btnCloseDomPip&&(PRIVATE.videojsPlayer.isFullscreen()?PRIVATE.els.btnCloseDomPip.style.display="none":PRIVATE.els.btnCloseDomPip.style.display=""),PRIVATE.resize()}),PRIVATE.els.videoElement.addEventListener("webkitendfullscreen",function(){PRIVATE.exitFullScreen()});var elemPip=PRIVATE.videojsPlayer.el_.querySelector(".vjs-picture-in-picture-control");elemPip&&(elemPip.addEventListener("click",function(){PRIVATE.isHLS&&PRIVATE.setBitrateQuality(-1),window.tga.send("send","event","player","pip",unescape(PRIVATE.videoData.title),{dimension9:"terra"})}),PRIVATE.videojsPlayer.on("enterpictureinpicture",PRIVATE.eventHandlerNativePipTurnedOn),PRIVATE.videojsPlayer.on("leavepictureinpicture",PRIVATE.eventHandlerNativePipTurnedOff)),PRIVATE.btnFullscreen&&PRIVATE.btnFullscreen.addEventListener("click",function(){PRIVATE.videojsPlayer.isFullscreen()?PRIVATE.videojsPlayer.exitFullscreen():PRIVATE.videojsPlayer.requestFullscreen()}),PRIVATE.videojsPlayer.on("pause",function(){PRIVATE.els.shareMenuInput.value=PRIVATE.formatSecondsToReadableTime(PRIVATE.videojsPlayer.currentTime())}),window.addEventListener("resize",PRIVATE.resize)},PRIVATE.bindShareMenuEvents=function(){var iconNames;PRIVATE.videojsPlayer.el_.querySelector(".t360-player--share--button").addEventListener("click",PRIVATE.openCloseShareMenu),PRIVATE.videojsPlayer.el_.querySelector(".t360-player--share--bt-copy.link").addEventListener("click",function(evt){PRIVATE.shareClipboard(PRIVATE.videoData.link,evt.target)}),PRIVATE.videojsPlayer.el_.querySelector(".t360-player--share--bt-copy.embed").addEventListener("click",function(evt){PRIVATE.shareClipboard(PRIVATE.videoData.embed,evt.target)}),["whatsapp","facebook","twitter","pinterest"].forEach(function(name){var icon;PRIVATE.videojsPlayer.el_.querySelector(".icon-"+name).addEventListener("click",PRIVATE.shareFunctions[name])}),PRIVATE.els.shareMenuCheckbox.addEventListener("change",function(evt){var qsValue=this.checked?PRIVATE.getTimeStringInSeconds(PRIVATE.els.shareMenuInput.value):null;PRIVATE.els.shareMenuInput.disabled=!this.checked,PRIVATE.addQueryStringParamToVideoUrl("t",qsValue)}),PRIVATE.els.shareMenuInput.addEventListener("blur",function(evt){var sanitizedInSeconds=PRIVATE.els.shareMenuInput.value,sanitized=PRIVATE.sanitizeTimestampString(sanitizedInSeconds),sanitizedInSeconds=PRIVATE.getTimeStringInSeconds(sanitized);sanitizedInSeconds>PRIVATE.videoData.duration?PRIVATE.els.shareMenuInput.value=PRIVATE.formatSecondsToReadableTime(PRIVATE.videoData.duration):PRIVATE.els.shareMenuInput.value=sanitized,PRIVATE.addQueryStringParamToVideoUrl("t",sanitizedInSeconds)})},PUBLIC.buildUp=function(){return PRIVATE.cleanUp(),PRIVATE.state.set("userInteraction",!1),new Promise(function buildUp(resolve,reject){PRIVATE.restoreVolumeValues(),PRIVATE.playerContainer.className.indexOf("zaz--standalone")<0&&(PRIVATE.playerContainer.className+=" zaz--standalone"),PRIVATE.playerContainer.appendChild(PUBLIC.templates.render("theBasics",PRIVATE)),PRIVATE.els.player=PRIVATE.playerContainer.firstChild,PUBLIC.player=PRIVATE.els.player,resolve()})},PRIVATE.loadDependencies=function(){return Promise.all([new Promise(function(resolve,reject){!1===data.advertise.enabled?resolve():pkg.require(["mod.dfp"],function(){console.info("Loaded Google IMA SDK"),resolve()},function(error){console.error("Error loading Google IMA SDK",error),resolve()})}),new Promise(function(resolve,reject){!1===data.advertise.enabled?resolve():pkg.require(["mod.prebid"],function(){console.info("Loaded Prebid"),resolve()},function(error){console.error("Error loading Prebid",error),resolve()})}),new Promise(function(resolve,reject){!1===data.advertise.enabled?resolve():pkg.require(["mod.aps"],function(){console.info("Loaded APS"),resolve()},function(error){console.error("Error loading APS",error),resolve()})})])},PRIVATE.getVideoData=function(videoId){return new Promise(function getVideoDataPromise(resolve,reject){var videoUrl=STATIC.backendVideoUrl.replace("#VIDEO_ID#",videoId.toString());console.log("Loading video: "+videoUrl),fetch(videoUrl).then(function(response){if(response.ok)return response.json();throw new Error("Error fetching video data")}).then(function(canonizedData){var isHLS=!1,canonizedData=PRIVATE.canonizeFeed(canonizedData),videoResult,isHLS;data.overrideVideoUrl&&(videoResult={url:data.overrideVideoUrl,type:"application/x-mpegURL"},isHLS=!0,0<=data.overrideVideoUrl.indexOf(".mp4")&&(isHLS=!(videoResult.type="video/mp4")),resolve([videoResult,canonizedData,isHLS]));var videoResult={url:null,type:null},results;1<canonizedData.bitrates.length?results=canonizedData.bitrates.filter(function(element){return 2==element.quality}):0<canonizedData.bitrates.length&&(results=[canonizedData.bitrates[0]]),results&&results.length?videoResult={url:results[0].url,type:"mp4"==results[0].type?"video/mp4":"application/x-mpegURL"}:canonizedData.streamingUrl&&(videoResult={url:canonizedData.streamingUrl,type:"mp4"==canonizedData.streamingUrl.search(".mp4")?"video/mp4":"application/x-mpegURL"}),"application/x-mpegURL"==videoResult.type&&(isHLS=!0),resolve([videoResult,canonizedData,isHLS])}).catch(function(err){return console.error(err),reject()})})},PRIVATE.requestBackend=function(){return new Promise(function(resolve,reject){if(data.onlyAdvertise)return resolve();PRIVATE.getVideoData(data.videoId).then(function(results){var playResult=results[0];return"object"!=typeof playResult?reject("Could not get video play url"):(PRIVATE.videoData=results[1],"object"!=typeof PRIVATE.videoData?reject("Unable to get video data"):(PRIVATE.isHLS=results[2],PRIVATE.videoId=PRIVATE.videoData.videoId,PRIVATE.state.set("videoData",PRIVATE.videoData),PRIVATE.videoData.videoSrc=PUBLIC.mediaUrl=playResult.url,PRIVATE.videoData.videoType=playResult.type,PRIVATE.setupMetricsData(),console.info("Playback URL",PRIVATE.videoData.videoSrc),resolve()))}).catch(function(err){reject(err)})})};var formattedDuration=function(secondsLeft){var minutes=Math.floor(secondsLeft/60),secondsLeft=secondsLeft%60,formattedSeconds;PRIVATE.formattedDuration=minutes+":"+(secondsLeft<10?"0"+secondsLeft:secondsLeft)},queryStrings;return PRIVATE.renderPlayer=function(){return new Promise(function(resolve,reject){PRIVATE.els.player.appendChild(PUBLIC.templates.render("thePlayer",PRIVATE)),PRIVATE.els.videoEl=PRIVATE.pqs(".t360-player"),PRIVATE.loadVideoJS().then(function(){console.info("Player --\x3e loadVideoJS"),PRIVATE.els.videoSource=PRIVATE.pqs("source"),PRIVATE.els.adCountdown=PRIVATE.pqs(".vjs-current-time-display"),PRIVATE.els.adDuration=PRIVATE.pqs(".vjs-duration-display"),PRIVATE.els.btnPip=PRIVATE.pqs(".vjs-picture-in-picture-control"),PRIVATE.els.btnFullScreen=PRIVATE.pqs(".vjs-fullscreen-control"),PRIVATE.els.btnHd=PRIVATE.pqs(".zp-btn-hd"),PRIVATE.els.btnBitrates=PRIVATE.pqs(".zp-btn-bitrates"),PRIVATE.els.txtBitrate=PRIVATE.pqs(".zp-btn-bitrates .zp-bitrate"),PRIVATE.els.btnHdDisabled=PRIVATE.pqs(".zp-btn-hd-disabled"),PRIVATE.els.btnPlay=PRIVATE.pqs(".vjs-play-control"),PRIVATE.els.btnBigPlay=PRIVATE.pqs(".vjs-big-play-button"),PRIVATE.els.btnPause=PRIVATE.els.btnPlay,PRIVATE.els.btnStop=PRIVATE.pqs(".zp-btn-stop"),PRIVATE.els.btnReplay=PRIVATE.pqs(".zp-btn-replay"),PRIVATE.els.btnVolume=PRIVATE.pqs(".vjs-mute-control"),PRIVATE.els.btnChromecast=PRIVATE.pqs(".zp-btn-chromecast"),PRIVATE.els.controlsContainer=PRIVATE.pqs(".vjs-control-bar"),PRIVATE.els.storyboard=PRIVATE.pqs(".zp-control-progress .zp-tooltip .zp-storyboard"),PRIVATE.els.volumeMouseOver=PRIVATE.pqs(".vjs-volume-control"),PRIVATE.els.btnVjsPlayControl=PRIVATE.pqs(".vjs-play-control"),PRIVATE.els.progressBar=PRIVATE.pqs(".vjs-progress-control .vjs-progress-holder"),PRIVATE.els.mouseDisplayTime=PRIVATE.pqs(".vjs-mouse-display .vjs-time-tooltip"),PRIVATE.els.btnCloseDomPip=PRIVATE.pqs(".t360-player--pip-close"),PRIVATE.videoData&&PRIVATE.videoData.duration&&!PRIVATE.videoData.isLive?formattedDuration(PRIVATE.videoData.duration):PRIVATE.formattedDuration=-1,PRIVATE.videojsPlayer.el_.appendChild(PUBLIC.templates.render("shareMenu",{duration:PRIVATE.formattedDuration})),PRIVATE.els.controlsContainer&&data.controls&&(PRIVATE.els.controlsContainer.appendChild(PUBLIC.templates.render("fullscreen")),PRIVATE.els.controlsContainer.appendChild(PUBLIC.templates.render("optionsMenu",{isHls:PRIVATE.isHLS,isIOS:PRIVATE.isIOS}))),PRIVATE.els.bitratesTooltip=PRIVATE.pqs("#t360-player-quality"),PRIVATE.btnFullscreen=PRIVATE.videojsPlayer.el_.querySelector(".t360-player--fullscreen"),data.advertise.enabled&&(PRIVATE.els.adContainer=document.createElement("div"),PRIVATE.els.adContainer.className="t360-player--ad-container",PRIVATE.videojsPlayer.el_.appendChild(PRIVATE.els.adContainer)),PRIVATE.els.shareMenuCheckbox=PRIVATE.pqs("#t360-player-share-checkbox"),PRIVATE.els.shareMenuInput=PRIVATE.pqs("#t360-player-share-input"),PRIVATE.bindOptionsMenu(),PRIVATE.bindShareMenuEvents(),PRIVATE.bindVideojsEvents(),PRIVATE.bindAutoplayEvents(),PRIVATE.autoPip&&(PRIVATE.bindDomPipScrollEvents(),PRIVATE.bindAutoplayOnView()),PRIVATE.isRelatedVideo&&PRIVATE.bindAutoplayRelatedVideo(),PRIVATE.resize(),PRIVATE.videoData&&PRIVATE.els.player.setAttribute("category",PRIVATE.getLandingName(PRIVATE.videoData.channel)),(0<=navigator.userAgent.indexOf("iPhone")||0<=navigator.userAgent.indexOf("iPad"))&&PRIVATE.setPlayerState("bigPlay","hide"),PRIVATE.isHLS&&(PRIVATE.els.videoEl.className=PRIVATE.els.videoEl.className+" vjs-hls"),resolve()})})},PRIVATE.getLandingName=function(channel){var landingName="default";if(channel)for(var className=["noticias","economia","esportes","diversao","vida-e-estilo","musica","game-on"],x=0;x<className.length;x++)if(channel.path&&0<=channel.path.search(className[x])){landingName=className[x];break}return landingName},PRIVATE.toPlayOrNoToPlay=function(){return new Promise(function(resolve,reject){data.onlyAdvertise||!PRIVATE.videoData.metrics.isadult||PRIVATE.disclaimerAccepted?PRIVATE.loadVideoOrPreroll():PRIVATE.showDisclaimer(),resolve()})},PRIVATE.loadVideoOrPreroll=function(){PRIVATE.setVolumeFromRestoredValues(),data.autoPlay||data.continuePip||data.onlyAdvertise?data.advertise.enabled?PRIVATE.loadAdvertise():(null!==data.startsAt&&PRIVATE.videojsPlayer.currentTime(data.startsAt),PRIVATE.loadVideoChapters(),PRIVATE.videojsPlayer.autoplay("any")):PRIVATE.els.player.classList.remove("t360-player-force-spinner")},PRIVATE.loadVideoJS=function(){return new Promise(function(resolve,reject){window.performance&&window.performance.clearMarks&&(window.performance.clearMarks("PLAYER_AD_START"),window.performance.clearMarks("PLAYER_AD_END"),window.performance.clearMarks("PLAYER_VIDEO_START"),window.performance.clearMarks("PLAYER_VIDEO_END"),window.performance.clearMeasures("PLAYER_VIDEO_TIME"),window.performance.clearMeasures("PLAYER_AD_TIME")),PRIVATE.videojsParams={techOrder:["html5"],autoplay:!1,loop:data.loop,preload:PRIVATE.isHLS&&data.advertise.enabled?"none":"metadata",controls:!0,errorDisplay:!1,textTrackSettings:!0,textTrackDisplay:!0,controlBar:{seekToLive:!1,customControlSpacer:!1,audioTrackButton:!1,captionsButton:!1,chaptersButton:!1,subtitlesButton:!1,subsCapsButton:!1,descriptionsButton:!1,audioTracksButton:!1,liveDisplay:!1,remainingTimeDisplay:!1,fullscreenToggle:!1,playbackRateMenuButton:!1,volumePanel:{inline:!1}},aspectRatio:data.aspectRatio,fill:!0},0==data.controls&&(PRIVATE.videojsParams.controlBar.volumePanel=!1,PRIVATE.videojsParams.controlBar.playToggle=!1,PRIVATE.videojsParams.controlBar.durationDisplay=!1,PRIVATE.videojsParams.controlBar.timeDivider=!1,PRIVATE.videojsParams.controlBar.pictureInPictureToggle=!1,PRIVATE.videojsParams.controlBar.currentTimeDisplay=!1),PRIVATE.restoredMuted&&(PRIVATE.videojsParams.muted=!0),PRIVATE.videojsPlayer=__shared.dependencies.mod.videojs(PRIVATE.els.videoEl,PRIVATE.videojsParams,function(){PUBLIC.videojsPlayer=PRIVATE.videojsPlayer=this,(PRIVATE.videojsPlayer._PRIVATE=PRIVATE).videojsPlayer._data=data,PRIVATE.isHLS&&data.advertise.enabled&&PRIVATE.videojsPlayer.tech("hls").reset(),PRIVATE.videojsPlayer.el_.classList.add("vjs-has-started"),PRIVATE.videojsPlayer.el_.classList.add("t360-player-started"),data.controls||PRIVATE.videojsPlayer.el_.classList.add("vjs-no-controls"),PRIVATE.els.videoEl.parentElement||(PRIVATE.els.videoEl=PRIVATE.els.player.querySelector(".video-js"));var elemLoadingVjs=PRIVATE.els.player.querySelector(".t360-loading-vjs");if(elemLoadingVjs&&PRIVATE.els.player.removeChild(elemLoadingVjs),!PRIVATE.els.videoEl.requestPictureInPicture&&PRIVATE.els.btnPip&&(PRIVATE.els.btnPip.style.display="none"),PRIVATE.els.videoElement=PRIVATE.els.player.querySelector(".vjs-tech"),PRIVATE.setVolumeFromRestoredValues(),"function"==typeof data.onReady)try{data.onReady(PUBLIC)}catch(err){console.error("Got an error while running user callback funcion.",err)}resolve()})})},PRIVATE.setStoryboardBackground=function(){if(PRIVATE.videoData.isLive||PRIVATE.videoData.bitrates.length<=0)return null;PRIVATE.storyboardSplit=100;for(var mediaFileName=PRIVATE.videoData.bitrates[0].fileName,url,xSize=140,ySize=78,thumbData={0:{src:STATIC.storyboardUrl.replace("#VIDEO_ID#",mediaFileName),style:{left:"0",top:"0",width:"1400px",height:"780px",clip:"rect(0, 140px, 78px, 0)"}}},oneHundredthDuration=Math.floor(PRIVATE.videoData.duration/100),i=1;i<100;i++){var yCoordinate,xCoordinate,yPosition=78*Math.floor(i/10),xPosition=140*(i%10);thumbData[i*oneHundredthDuration]={top:yPosition+"px",left:xPosition+"px",clip:"rect("+yPosition+"px,"+(140+xPosition)+"px,"+(78+yPosition)+"px,"+xPosition+"px)"}}PRIVATE.videojsPlayer.thumbnails(thumbData)},function(){function sendMetrics(action,customParams){var pluginVersion,label,playerDisplayMode="default";customParams=customParams||{};try{1==PRIVATE.state.get("native-pip")?playerDisplayMode="pip":PUBLIC.api.isPip()?playerDisplayMode="pip-auto":PRIVATE.videojsPlayer.isFullscreen()&&(playerDisplayMode="fullScreen"),label=customParams.label||metricsData.contenttitle,__shared.dependencies.mod.videojs.VERSION&&(pluginVersion="VideoJS: "+__shared.dependencies.mod.videojs.VERSION);var videoType="VOD";data.metricVideoType?videoType=data.metricVideoType:"ad"==customParams.type?videoType="Advertising":PRIVATE.videoData.isLive&&(videoType="Live");var ga4Params={video_content_type:videoType,video_status:action,video_display_mode:playerDisplayMode,video_autoplay:data.autoPlay?"true":"false",video_player:pluginVersion,video_title:metricsData.contenttitle,amp:"false",channel:metricsData.channel,content_source:metricsData.provideraudience,content_id:metricsData.contentid,content_provider:metricsData.vendor};metricsData.videoAuthorName&&(ga4Params.content_author=metricsData.videoAuthorName.toLowerCase()),window.terra_info_type&&(ga4Params.content_type=window.terra_info_type.toLowerCase()),data.videoContentType&&(ga4Params.video_category=data.videoContentType.toLowerCase()),metricsData.subchannel&&(ga4Params.subchannel=metricsData.subchannel),metricsData.channeldetail&&(ga4Params.channeldetail=metricsData.channeldetail),"Advertising"==videoType&&label&&"timeout"==action&&(ga4Params.video_log=label),window.tga.sendGA4("video",ga4Params)}catch(err){console.error("Error sending metrics",err)}}PUBLIC.metricsSent=[];var metricsAction_PLAY="play",metricsAction_STOP="stop",metricsAction_END="100%",metricsAction_COMPLETE="complete",metricsAction_SHOW="show",metricsAction_SKIPPED="skipped",metricsAction_USER_CLOSE="user close",metricsAction_PROGRESS="progress",metricsAction_SWITCH_BITRATE="bitrate",metricsAction_AD_TIMEOUT="timeout";PRIVATE.metricsControl={percent25:!1,percent50:!1,percent75:!1,stop:!1},PRIVATE.metricsAdControl={play:!1,complete:!1,show:!1,skipped:!1,userClose:!1,timeout:!1};var metricsDevice=4;switch(pkg.context.platform.mode){case"mobile":metricsDevice=6;break;case"tablet":metricsDevice=2;break;default:metricsDevice=4}var metricsData={};PRIVATE.setupMetricsData=function(){var channelPath,lastItem;PRIVATE.videoData.channel.isWhiteLabel&&(metricsDevice=5);var videoUrl=PRIVATE.videoData.videoSrc.split("?")[0];metricsData={contentid:data.videoId,contenttitle:PRIVATE.videoData.title,country:pkg.context.page.get("country"),origin:data.metricScenario,isembeded:data.isEmbedded,ispreroll:0,mediaurl:videoUrl,filename:null,duration:PRIVATE.videoData.duration,position:0,uvsystem:PRIVATE.videoData.metrics.uvsystem,uvtag:PRIVATE.videoData.metrics.uvtag,sourceid:PRIVATE.videoData.channel.id,sourcetitle:PRIVATE.videoData.channel.title,contentproviderid:PRIVATE.videoData.provider.id,provideraudience:PRIVATE.videoData.provider.audience||"",vendor:PRIVATE.videoData.vendor&&PRIVATE.videoData.vendor.name?PRIVATE.videoData.vendor.name:null,islive:PRIVATE.videoData.metrics.islive,isadult:PRIVATE.videoData.metrics.isadult,isclosed:PRIVATE.videoData.metrics.isclosed,iswide:PRIVATE.videoData.metrics.iswide,isrelated:PRIVATE.videoData.metrics.isrelated,device:metricsDevice,referrer:window.location!=window.parent.location?document.referrer:document.location.href,plyrv:PUBLIC.version,channel:PRIVATE.videoData.infoPath.channel,subchannel:PRIVATE.videoData.infoPath.subchannel,channeldetail:PRIVATE.videoData.infoPath.channeldetail},PRIVATE.videoData.author&&(metricsData.videoAuthorName=PRIVATE.videoData.author.audience)},PRIVATE.getVideoResolution=function(){var resolution;if(PRIVATE.isHLS)try{var tech=PRIVATE.videojsPlayer.tech(),currentList;tech&&tech.vhs&&tech.vhs.selectPlaylist&&((currentList=tech.vhs.selectPlaylist())&&currentList.attributes&&currentList.attributes.RESOLUTION&&(resolution=currentList.attributes.RESOLUTION.height+"p"))}catch(e){console.error("Error to get resolution",e)}return resolution},PRIVATE.progressTimer=null,PRIVATE.liveDuration=0,PRIVATE.sendMetricsPlay=function(){var customMetrics={type:"video"},waitingTime;if(null===PRIVATE.progressTimer?(console.info("Creating 1s timer for progress metrics"),PRIVATE.progressTimer=setInterval(PRIVATE.sendMetricsProgress,1e3)):console.warn("Won't start metrics progress timer again - it is already running"),PRIVATE.metricsControl.play)return!1;if(PRIVATE.metricsControl.play=!0,PRIVATE.metricsControl.stop=!1,window.performance&&window.performance.measure)try{window.performance.measure("PLAYER_VIDEO_TIME","PLAYER_VIDEO_START","PLAYER_VIDEO_END"),(waitingTime=parseInt(window.performance.getEntriesByName("PLAYER_VIDEO_TIME")[0].duration))<0&&(waitingTime=0)}catch(e){waitingTime=0}customMetrics.resolution=PRIVATE.getVideoResolution(),customMetrics.waitingTime=waitingTime,metricsData.position=PRIVATE.getCurrentTime(),sendMetrics(metricsAction_PLAY,customMetrics)},PRIVATE.sendMetricsProgress=function(label){PRIVATE.state.get("advertising")||PRIVATE.liveDuration++;var label,customMetrics={type:"video"},label=label||PUBLIC.api.getCurrentTime();customMetrics.resolution=PRIVATE.getVideoResolution(),(label=PRIVATE.videoData.isLive?PRIVATE.progressByTime(PRIVATE.liveDuration):PRIVATE.progressByPercent(label))&&sendMetrics("view-"+label,customMetrics)},PRIVATE.progressByTime=function(position){var label,timeStep=300,timesView={10:"10s",30:"30s",60:"1m"};return timesView[position=Math.round(position)]?label=timesView[position]:300<=position&&position%300==0&&(label=position/300*5+"m"),label},PRIVATE.progressByPercent=function(percent){var label,percent=parseInt(percent/metricsData.duration*100);return 25<=percent&&percent<50&&!PRIVATE.metricsControl.percent25?(label="25%",PRIVATE.metricsControl.percent25=!0):50<=percent&&percent<75&&!PRIVATE.metricsControl.percent50?(label="50%",PRIVATE.metricsControl.percent50=!0):75<=percent&&!PRIVATE.metricsControl.percent75&&(label="75%",PRIVATE.metricsControl.percent75=!0),__shared.states.set("player-progress",label),PRIVATE.state.set("player-progress",label),label},PRIVATE.sendMetricsPause=function(){console.info("Pausing timer for progress metrics"),metricsData.position=PRIVATE.getCurrentTime(),PRIVATE.progressTimer&&(clearInterval(PRIVATE.progressTimer),PRIVATE.progressTimer=null)},PRIVATE.sendMetricsSwitchBitrate=function(bitrate){console.info("Sending metrics for switch bitrate"),sendMetrics(metricsAction_SWITCH_BITRATE,{type:"video",bitrate:bitrate})},PRIVATE.sendMetricsStop=function(event){var customMetrics={type:"video"};if(PRIVATE.metricsControl.stop)return!1;PRIVATE.metricsControl.stop=!0,metricsData.position=PUBLIC.api.getCurrentTime(),customMetrics.resolution=PRIVATE.getVideoResolution(),sendMetrics(metricsAction_STOP,customMetrics),PRIVATE.progressTimer&&(clearInterval(PRIVATE.progressTimer),PRIVATE.progressTimer=null)},PRIVATE.sendMetricsEnd=function(){var customMetrics={type:"video"};PRIVATE.metricsControl={percent25:!1,percent50:!1,percent75:!1,stop:!1,play:!1},metricsData.position=PUBLIC.api.getCurrentTime(),customMetrics.resolution=PRIVATE.getVideoResolution(),sendMetrics("view-"+metricsAction_END,customMetrics),PRIVATE.progressTimer&&(clearInterval(PRIVATE.progressTimer),PRIVATE.progressTimer=null)},PRIVATE.getAdInfo=function(){var adInfo={id:1,title:"External AD video",duration:30,filename:"ad.mp4"},adMetrics=null;PRIVATE.adsManager&&(adMetrics=PRIVATE.adsManager.getCurrentAd())&&(adInfo.id=adMetrics.getAdId(),adInfo.title=adMetrics.getTitle(),adInfo.duration=adMetrics.getDuration(),adInfo.position=Math.max(Math.min(adInfo.duration,adInfo.duration-PRIVATE.adsManager.getRemainingTime())));var adMetrics=JSON.parse(JSON.stringify(metricsData));return adMetrics.ispreroll=1,adMetrics.contentid=adInfo.id,adMetrics.title=adInfo.title,adMetrics.duration=adInfo.duration,adMetrics.position=adInfo.position,adMetrics},PRIVATE.parserAdInfo=function(objCreativeAd){var waitingTime;if(window.performance&&window.performance.measure)try{window.performance.measure("PLAYER_AD_TIME","PLAYER_AD_START","PLAYER_AD_END"),(waitingTime=parseInt(window.performance.getEntriesByName("PLAYER_AD_TIME")[0].duration))<0&&(waitingTime=0)}catch(e){waitingTime=0}var info=PRIVATE.getAdInfo();return info.type="ad",waitingTime&&(info.waitingTime=waitingTime),objCreativeAd&&(info.creativeId=objCreativeAd.creativeId,info.wrapperAdSystem=objCreativeAd.wrapperAdSystem||"",info.wrapperId=objCreativeAd.wrapperId||"",info.adCount=objCreativeAd.adCount||0),info},PRIVATE.clearMetricsAd=function(objCreativeAd){PRIVATE.metricsAdControl={play:!1,complete:!1,show:!1,skipped:!1,userClose:!1,timeout:!1}},PRIVATE.sendMetricsAdPlay=function(objCreativeAd){if(PRIVATE.metricsAdControl.play)return!1;PRIVATE.metricsAdControl.play=!0,console.info("Sending metrics for AD PLAY"),sendMetrics(metricsAction_PLAY,PRIVATE.parserAdInfo(objCreativeAd))},PRIVATE.sendMetricsAdShow=function(objCreativeAd){if(PRIVATE.metricsAdControl.show)return!1;PRIVATE.metricsAdControl.show=!0,console.info("Sending metrics for AD SHOW"),sendMetrics(metricsAction_SHOW,PRIVATE.parserAdInfo(objCreativeAd))},PRIVATE.sendMetricsAdComplete=function(){if(PRIVATE.metricsAdControl.complete)return!1;PRIVATE.metricsAdControl={play:!0,complete:!0,stop:!0,timeout:!0},console.info("Sending metrics for AD COMPLETE"),sendMetrics(metricsAction_COMPLETE,{type:"ad"})},PRIVATE.sendMetricsAdSkipped=function(){if(PRIVATE.metricsAdControl.skipped)return!1;PRIVATE.metricsAdControl.skipped=!0,console.info("Sending metrics for AD COMPLETE"),sendMetrics(metricsAction_SKIPPED,{type:"ad"})},PRIVATE.sendMetricsAdUserClose=function(){if(PRIVATE.metricsAdControl.userClose)return!1;PRIVATE.metricsAdControl.userClose=!0,console.info("Sending metrics for AD COMPLETE"),sendMetrics(metricsAction_USER_CLOSE,{type:"ad"})},PRIVATE.sendMetricsAdTimeout=function(label){if(PRIVATE.metricsAdControl.timeout)return!1;var waitingTime;if(PRIVATE.metricsAdControl.timeout=!0,console.info("Sending metrics for AD TIMEOUT"),window.performance&&window.performance.measure)try{window.performance.measure("PLAYER_AD_TIME","PLAYER_AD_START","PLAYER_AD_END"),(waitingTime=parseInt(window.performance.getEntriesByName("PLAYER_AD_TIME")[0].duration))<0&&(waitingTime=0)}catch(e){waitingTime=0}var adInfo=PRIVATE.getAdInfo();adInfo.type="ad",waitingTime&&(adInfo.waitingTime=waitingTime),adInfo.label=label||(PRIVATE.videoData.isLive?"Timeout Pre-Roll Live":"Timeout Pre-Roll On-Demand"),sendMetrics(metricsAction_AD_TIMEOUT,adInfo)},PRIVATE.regThirdMetrics=function(){return new Promise(function(resolve,reject){if(PRIVATE.videoData&&-1<PRIVATE.videoData.provider.title.search("BBC"))try{pkg.require("mod.bbcws",function(){window[_ns_bbcws]("partner","terra.com.br"),window[_ns_bbcws]("producer","Brasil"),window[_ns_bbcws]("language","pt-br");var player=PRIVATE.els.player.querySelector("video"),playerId=PRIVATE.els.player.id||player.id;window[_ns_bbcws]("trackHtml5AV",playerId,{clipId:data.videoId,clipName:document.querySelector(".article__header__headline").textContent.trim(),player:player.id},player),resolve()},resolve)}catch(error){resolve()}else resolve()})}}(),PRIVATE.onAdError=function(error){return console.error(error,"Player --\x3e Ad error:"),PRIVATE.clearImaObjects(),PRIVATE.onAdTimeout(error)},PRIVATE.clearImaObjects=function(){PRIVATE.adsManager&&(PRIVATE.adsManager.destroy(),PRIVATE.adsManager=null),PRIVATE.adsLoader&&(PRIVATE.adsLoader.destroy(),PRIVATE.adsLoader=null)},PRIVATE.pauseTransition=function(){PRIVATE.videojsPlayer.el_.classList.add("vjs-paused"),PRIVATE.isPaused=!0,PRIVATE.els.btnVjsPlayControl&&(PRIVATE.els.btnVjsPlayControl.classList.add("vjs-paused"),PRIVATE.els.btnVjsPlayControl.classList.remove("vjs-playing"))},PRIVATE.playTransition=function(){PRIVATE.videojsPlayer.el_.classList.remove("vjs-paused"),PRIVATE.isPaused=!1,PRIVATE.els.btnVjsPlayControl&&(PRIVATE.els.btnVjsPlayControl.classList.remove("vjs-paused"),PRIVATE.els.btnVjsPlayControl.classList.add("vjs-playing"))},PRIVATE.setAdCount=function(){var text,adCount;PRIVATE.adText&&(text="Anúncio ",PRIVATE.currentAd&&1<PRIVATE.currentAd.getAdPodInfo().getTotalAds()&&(text+=PRIVATE.currentAd.getAdPodInfo().getAdPosition()+" de "+PRIVATE.currentAd.getAdPodInfo().getTotalAds()),"loading"!=PRIVATE.state.get("advertising")&&(text+=" -"),PRIVATE.adText.innerText=text)},PRIVATE.onAdProgressTimer=function(){var remainingTime;PRIVATE.adsManager&&PRIVATE.videojsPlayer.duration&&(0<=(remainingTime=PRIVATE.adsManager.getRemainingTime())&&PRIVATE.videojsPlayer.duration(Math.ceil(remainingTime))),PRIVATE.setAdCount()},PRIVATE.adControlFinished=!1,PRIVATE.resumeVideoFromAd=function(){console.log("Player --\x3e Resuming video content"),PRIVATE.middlewareAdMode=!1,PRIVATE.adPaused=!1,PRIVATE.adControlFinished||(PRIVATE.adControlFinished=!0),PRIVATE.els.player.classList.remove("t360-player-force-spinner"),PRIVATE.clearAdProgressTimer(),PRIVATE.clearAdTimeoutTimer(),PRIVATE.state.set("IMA_AD_FINISH",""),data.onlyAdvertise?(PRIVATE.els.adContainer.innerHTML="",PRIVATE.loadAdvertise()):(PRIVATE.adText&&(PRIVATE.adText.innerText="/"),(PRIVATE.isIOS||PRIVATE.isHLS)&&PRIVATE.videojsPlayer.src({src:PRIVATE.videoData.videoSrc,type:PRIVATE.videoData.videoType}),data.useLowestBitrate&&PRIVATE.setLowestBitrate(),(!PRIVATE.currentAd||PRIVATE.currentAd&&PRIVATE.currentAd.isLinear())&&PRIVATE.setPlayerState("advertising",!1),PRIVATE.videojsPlayer.duration(PRIVATE.videoData.duration),setTimeout(function(){null!==data.startsAt&&PRIVATE.videojsPlayer.currentTime(data.startsAt),PRIVATE.loadVideoChapters(),PRIVATE.videojsPlayer.autoplay("any")},50))},PRIVATE.destroyAdElements=function(){PRIVATE.els.adContainer&&(PRIVATE.isIOS?PRIVATE.els.adContainer.style.display="none":PRIVATE.els.adContainer&&PRIVATE.els.adContainer.parentElement.removeChild(PRIVATE.els.adContainer)),PRIVATE.adText&&(PRIVATE.adText.innerText="/"),console.warn("Player --\x3e Destroyed all AD elements")},PRIVATE.onAdTimeout=function(error){error||console.error("Player --\x3e Ad error: Timed out!"),PRIVATE.clearImaObjects(),PRIVATE.destroyAdElements(),PRIVATE.sendMetricsAdTimeout(error),PRIVATE.resumeVideoFromAd()},PRIVATE.clearAdProgressTimer=function(){PRIVATE.adProgressTimer&&(clearInterval(PRIVATE.adProgressTimer),PRIVATE.adProgressTimer=null)},PRIVATE.clearAdTimeoutTimer=function(){PRIVATE.adTimeoutTimer&&(clearTimeout(PRIVATE.adTimeoutTimer),PRIVATE.adTimeoutTimer=null,console.log("Player --\x3e Stopped ad timeout timer"))},PRIVATE.imaAdError=function(adError){var errorMessage="",adError;!adError||"function"!=typeof adError.getError||(adError=adError.getError())&&"function"==typeof adError.getMessage&&(errorMessage=adError.getMessage()),window.performance&&window.performance.mark&&window.performance.mark("PLAYER_AD_END"),PRIVATE.onAdError(errorMessage)},PRIVATE.imaAdContentPauseRequested=function(){console.info("Player --\x3e Pause requested from ad"),PRIVATE.videojsPlayer&&PRIVATE.videojsPlayer.pause()},PRIVATE.imaContentResumeRequested=function(){var adState;console.info("Player --\x3e imaContentResumeRequested"),"loading"!=PRIVATE.state.get("advertising")&&(0<PRIVATE.mediaCurrentTime&&(data.startsAt=PRIVATE.mediaCurrentTime,PRIVATE.mediaCurrentTime=0),PRIVATE.resumeVideoFromAd())},PRIVATE.imaLoaded=function(adEvent){console.info("Player --\x3e Ad loaded"),PRIVATE.currentAd=adEvent.getAd(),PRIVATE.mediaCurrentTime||(PRIVATE.mediaCurrentTime=PRIVATE.videojsPlayer.currentTime()),PRIVATE.currentAd.isLinear()||(PRIVATE.resizeNonlinear(),PRIVATE.setPlayerState("advertising","nonlinear"),PRIVATE.adText.innerText="/"),window.performance&&window.performance.mark&&window.performance.mark("PLAYER_AD_END")},PRIVATE.imaStarted=function(adEvent){console.info("Player --\x3e Ad started");var wrapperAdSystems,wrapperIds,wrapperAdIds,adSystem,duration=!0,objCreativeAd={},duration;try{PRIVATE.currentAd=adEvent.getAd(),wrapperAdIds=adEvent.getAd().getWrapperCreativeIds(),wrapperAdSystems=adEvent.getAd().getWrapperAdSystems(),wrapperIds=adEvent.getAd().getWrapperAdIds(),adSystem=adEvent.getAd().getAdSystem(),duration=PRIVATE.currentAd.isLinear(),wrapperAdIds&&0<wrapperAdIds.length&&wrapperAdIds.forEach(function(val){""!=val&&(void 0!==objCreativeAd.creativeId?objCreativeAd.creativeId+=",":objCreativeAd.creativeId="",objCreativeAd.creativeId+=val)}),objCreativeAd.creativeId||(objCreativeAd.creativeId=adEvent.getAd().getCreativeId()),wrapperAdSystems&&0<wrapperAdSystems.length?(objCreativeAd.wrapperAdSystem=wrapperAdSystems[0],objCreativeAd.adCount=wrapperAdSystems.length):""!==adSystem&&(objCreativeAd.wrapperAdSystem=adSystem,objCreativeAd.adCount=0),wrapperIds&&0<wrapperIds.length&&(objCreativeAd.wrapperId=wrapperIds[0])}catch(e){}PRIVATE.clearAdTimeoutTimer(),PRIVATE.els.player.classList.remove("t360-player-force-spinner"),duration?(PRIVATE.resize(),PRIVATE.middlewareAdMode=!0,PRIVATE.setPlayerState("advertising","playing"),duration=0,PRIVATE.currentAd.getDuration&&(duration=PRIVATE.currentAd.getDuration()),PRIVATE.setAdCount(),PRIVATE.videojsPlayer.duration(duration),PRIVATE.playTransition(),PRIVATE.clearMetricsAd(),PRIVATE.sendMetricsAdPlay(objCreativeAd),PRIVATE.adProgressTimer||(PRIVATE.adProgressTimer=setInterval(PRIVATE.onAdProgressTimer,100))):(PRIVATE.sendMetricsAdShow(objCreativeAd),PRIVATE.resumeVideoFromAd())},PRIVATE.imaPaused=function(adEvent){console.info("Player --\x3e Ad paused"),PRIVATE.adPaused=!0,PRIVATE.pauseTransition(),PRIVATE.setPlayerState("advertising","paused"),PRIVATE.clearAdProgressTimer()},PRIVATE.imaResumed=function(adEvent){console.info("Player --\x3e Ad resumed"),PRIVATE.adPaused=!1,PRIVATE.playTransition(),PRIVATE.adsManager.setVolume(PRIVATE.restoredMuted?0:PRIVATE.restoredVolume/100),PRIVATE.setPlayerState("advertising","playing"),PRIVATE.adProgressTimer||(PRIVATE.adProgressTimer=setInterval(PRIVATE.onAdProgressTimer,250))},PRIVATE.imaComplete=function(adEvent){console.info("Player --\x3e Ad complete");var isLinear=!0,ad=adEvent?adEvent.getAd():null;ad&&(isLinear=ad.isLinear()),PRIVATE.adProgressTimer&&isLinear&&(clearInterval(PRIVATE.adProgressTimer),PRIVATE.adProgressTimer=null),PRIVATE.sendMetricsAdComplete(),PRIVATE.clearAdProgressTimer();var adCount=0;try{adCount=PRIVATE.currentAd.getAdPodInfo().getTotalAds()}catch(e){adCount=0}PRIVATE.state.set("IMA_COMPLETE",adEvent)},PRIVATE.imaAllAdsCompleted=function(){console.info("Player --\x3e All ads completed"),PRIVATE.resumeVideoFromAd()},PRIVATE.imaSkipped=function(){PRIVATE.sendMetricsAdSkipped()},PRIVATE.imaUserClose=function(){PRIVATE.sendMetricsAdUserClose()},PRIVATE.imaSkipStateChanged=function(val){PRIVATE.state.set("IMA_SKIPPABLE_STATE_CHANGED",val)},PRIVATE.imaClick=function(val){PRIVATE.state.set("IMA_CLICK",val)},PRIVATE.startAd=function(vol){try{PRIVATE.restoredMuted=0==vol,PRIVATE.videojsPlayer.volume(vol),PRIVATE.adsManager.start(),PRIVATE.resize(),console.log("Player --\x3e startAd")}catch(error){PRIVATE.onAdError(error)}},PRIVATE.onAdsManagerLoaded=function(evt){try{("iPhone"===pkg.context.platform.get("device")||0<=navigator.userAgent.indexOf("iPad"))&&(PRIVATE.els.videoElement.style.visibility="visible"),console.log("Player --\x3e onAdsManagerLoaded");var adsRenderingSettings=new google.ima.AdsRenderingSettings;adsRenderingSettings.restoreCustomPlaybackStateOnAdBreakComplete=!0,adsRenderingSettings.enablePreloading=!1,adsRenderingSettings.loadVideoTimeout=8e3,adsRenderingSettings.useStyledNonLinearAds=!0,adsRenderingSettings.uiElements=[],PRIVATE.adsManager=evt.getAdsManager(PRIVATE.els.videoElement,adsRenderingSettings),PRIVATE.adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,PRIVATE.imaAdError),PRIVATE.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,PRIVATE.imaAdContentPauseRequested),PRIVATE.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,PRIVATE.imaContentResumeRequested),PRIVATE.adsManager.addEventListener(google.ima.AdEvent.Type.LOADED,PRIVATE.imaLoaded),PRIVATE.adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,PRIVATE.imaStarted),PRIVATE.adsManager.addEventListener(google.ima.AdEvent.Type.PAUSED,PRIVATE.imaPaused),PRIVATE.adsManager.addEventListener(google.ima.AdEvent.Type.RESUMED,PRIVATE.imaResumed),PRIVATE.adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETE,PRIVATE.imaComplete),PRIVATE.adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,PRIVATE.imaAllAdsCompleted),PRIVATE.adsManager.addEventListener(google.ima.AdEvent.Type.SKIPPED,PRIVATE.imaSkipped),PRIVATE.adsManager.addEventListener(google.ima.AdEvent.Type.USER_CLOSE,PRIVATE.imaUserClose),PRIVATE.adsManager.addEventListener(google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,PRIVATE.imaSkipStateChanged),PRIVATE.adsManager.addEventListener(google.ima.AdEvent.Type.CLICK,PRIVATE.imaClick),PRIVATE.adsManager.init(PRIVATE.els.videoEl.parentElement.offsetWidth,PRIVATE.els.videoEl.offsetHeight,google.ima.ViewMode.NORMAL),PRIVATE.canAutoplay().then(function(canAutoplayWithSound){var vol=PRIVATE.restoredMuted?0:PRIVATE.restoredVolume/100;canAutoplayWithSound.result||(vol=0),PRIVATE.startAd(vol)})}catch(error){PRIVATE.onAdError(error),console.error(error)}},PRIVATE.getAdTag=function(){var adTag="";return PRIVATE.videoData&&PRIVATE.videoData.adTag&&(adTag=PRIVATE.videoData.adTag),adTag=-1===(adTag=data.advertise&&data.advertise.tag?data.advertise.tag:adTag).search("br.terra")?"br.terra.homepage/videos":adTag},PRIVATE.getURL=function(){var url,url=document.querySelector("link[rel='canonical']"),url=url&&url.href?url.href:location.protocol+"//"+location.host+location.pathname+location.search;return url},PRIVATE.getCustomParams=function(){var latinDmp=PRIVATE.state.get("videoData"),customParams={player:"terra",kw:""},queryStrings=pkg.context.page.get("query");"app-capa"===data.context?customParams.kw="videohome":data.isEmbedded?customParams.kw="embedado":customParams.kw="preroll",PRIVATE.autoPip&&(customParams.pip="true"),queryStrings&&"amp"==queryStrings.player_kw&&(customParams.kw="amp"),data.kw&&(customParams.kw=data.kw),data.clicked&&(customParams.adtype="trueview"),data.videoId&&(customParams.videoid=data.videoId),latinDmp&&(latinDmp.author&&latinDmp.author.audience&&(customParams.contentauthor=latinDmp.author.audience),latinDmp.provider&&latinDmp.provider.audience&&(customParams.contentsource=latinDmp.provider.audience),PRIVATE.videoData.infoPath&&(customParams.breadcrumb=PRIVATE.videoData.infoPath.breadcrumb,customParams.channel=PRIVATE.videoData.infoPath.channel,customParams.subchannel=PRIVATE.videoData.infoPath.subchannel,customParams.channeldetail=PRIVATE.videoData.infoPath.channeldetail),latinDmp.vendor&&latinDmp.vendor.name&&(customParams.vendor=latinDmp.vendor.name)),window.trr&&window.trr.contextData&&window.trr.contextData.vgnID&&(customParams.pageid=window.trr.contextData.vgnID),customParams.testfloor=(.5<Math.random()).toString();var latinDmp=PRIVATE.getLatinDmpParameters();if(latinDmp)for(var param,qs=latinDmp.split("&"),i=0;i<qs.length;i++)(param=qs[i].split("="))[0]&&(customParams[param[0]]=param[1]);return customParams},PRIVATE.sendBidsToAdServer=function(){var FAILSAFE_TIMEOUT=2e3,failsafeTimeoutObj,apsVideoCustParams={},requestManager={adserverRequestSent:!1,aps:!1,prebid:!1},pbjs=window.pbjs||{};pbjs.que=pbjs.que||[];var videoAdUnit={code:"video",mediaTypes:{video:{context:"instream",playerSize:[[8,8]],linearity:1,mimes:["video/mp4","application/javascript"],protocols:[2,5,6],api:[2],maxduration:30}},labelAny:["video-player"],bids:[{bidder:"rubicon",params:{accountId:"10828",siteId:"68816",zoneId:"327766",video:{playerWidth:"640",playerHeight:"480",size_id:"201",language:"pt",aeParams:{"p_aso.video.ext.skip":"1","p_aso.video.ext.skipdelay":"5"}}}},{bidder:"appnexus",params:{placementId:"16465730",video:{skippable:!0,playback_methods:["auto_play_sound_on"]}}},{bidder:"criteo",params:{zoneId:"1443903",video:{playbackmethod:2,skip:1,placement:1}}},{bidder:"smartadserver",params:{siteId:254198,pageId:975205,formatId:68539,video:{startDelay:1}}},{bidder:"yahoossp",params:{dcn:"8a969c43017c7c0d62a50ddaaff0000f",pos:"8a9695a0017c7c0d6caa0dddd5290016",bidOverride:{imp:{video:{w:640,h:480}}}}},{bidder:"medianet",params:{cid:"8CUDV2PQ3",crid:"987027362"}}]};window.apstag.init({pubID:"bc92a28d-5a18-4ea4-9491-626e7826c69c",adServer:"googletag",deals:!0});var sendAdserverRequest=function(){var adsRequest=0;!(adsRequest=PRIVATE.videoData&&PRIVATE.videoData.duration?PRIVATE.videoData.duration:adsRequest)&&PRIVATE.videojsPlayer&&PRIVATE.videojsPlayer.duration()&&(adsRequest=PRIVATE.videojsPlayer.duration());var videoUrl=pbjs.adServers.dfp.buildVideoUrl({adUnit:videoAdUnit,params:{iu:"/1211/"+PRIVATE.getAdTag(),output:"vast",description_url:window.encodeURIComponent(location.href),cust_params:Object.assign(PRIVATE.getCustomParams(),apsVideoCustParams),url:PRIVATE.getURL(),sz:"8x8|450x200",vid_d:adsRequest}}),adsRequest=new google.ima.AdsRequest;data.advertise.overrideUrl?(console.warn('Using "overrideUrl" parameter for adTagUrl'),adsRequest.adTagUrl=data.advertise.overrideUrl):(adsRequest.adTagUrl=videoUrl,console.info("Player --\x3e Will load advertise with following adTagUrl",adsRequest.adTagUrl)),adsRequest.linearAdSlotWidth=PRIVATE.els.videoEl.offsetWidth,adsRequest.linearAdSlotHeight=PRIVATE.els.videoEl.offsetHeight,adsRequest.nonLinearAdSlotWidth=PRIVATE.els.videoEl.offsetWidth,adsRequest.nonLinearAdSlotHeight=PRIVATE.els.videoEl.offsetHeight/3,adsRequest.setAdWillPlayMuted(!0),PRIVATE.adsLoader.requestAds(adsRequest)},biddersBack=function(timeout){requestManager.aps&&requestManager.prebid&&!requestManager.adserverRequestSent&&(clearTimeout(failsafeTimeoutObj),requestManager.adserverRequestSent=!0,sendAdserverRequest())};pbjs.que.push(function(){var prebidConf={enableSendAllBids:!0,usePrebidCache:!0,yahoossp:{mode:"video"},cache:{url:"https://prebid.adnxs.com/pbc/v1/cache"}},customGranularityVideo;pbjs.getConfig("pbjs_configSet")||(prebidConf.priceGranularity={buckets:[{max:5,increment:.01},{max:50,increment:.1}]}),pbjs.setConfig(prebidConf),pbjs.removeAdUnit("video"),pbjs.addAdUnits(videoAdUnit),window.apstag.fetchBids({slots:[{slotID:"preroll",mediaType:"video"}]},function(bids){var formatParams=function(pairs){var trimmedString,pairs=((pairs=decodeURIComponent(pairs)).startsWith("&")?pairs.substring(1):pairs).split("&"),apsBidObject={};return pairs.forEach(function(item){var item=item.split("=");apsBidObject[item[0]]=decodeURIComponent(item[1])}),apsBidObject},apsParams;bids.forEach(function(bid){"video"===bid.mediaType&&(apsParams=bid.encodedQsParams||bid.helpers.encodedQsParams())}),apsParams&&(apsVideoCustParams=formatParams(apsParams)),requestManager.aps=!0,biddersBack()}),pbjs.requestBids({labels:["video-player"],bidsBackHandler:function(){requestManager.prebid=!0,biddersBack()}}),failsafeTimeoutObj=setTimeout(function(){requestManager.aps=!0,biddersBack()},2e3)})},PRIVATE.loadAdvertiseHTML5=function(){if("object"!=typeof google)return PRIVATE.onAdError("Unable to load ad: Google IMA SDK was not found");PRIVATE.videojsPlayer.on("fullscreenchange",function(){PRIVATE.resize()});try{google.ima.settings.setVpaidAllowed(!0),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED);var fpd=localStorage.getItem("FPD");if(fpd)try{(fpd=JSON.parse(fpd))&&fpd.emailhash&&google.ima.settings.setPpid(fpd.emailhash)}catch(e){}PRIVATE.adDisplayContainer=new google.ima.AdDisplayContainer(PRIVATE.els.adContainer,PRIVATE.els.videoElement),PRIVATE.adDisplayContainer.initialize(),"function"==typeof PRIVATE.els.videoElement.load&&"mob"==pkg.context.platform.get("type")&&PRIVATE.els.videoElement.load(),PUBLIC.adsLoader=PRIVATE.adsLoader=new google.ima.AdsLoader(PRIVATE.adDisplayContainer),PUBLIC.adsLoader.getSettings().setAutoPlayAdBreaks(!0),PRIVATE.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,PRIVATE.onAdsManagerLoaded,!1),PRIVATE.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,function(adError){var errorMessage="",adError;!adError||"function"!=typeof adError.getError||(adError=adError.getError())&&"function"==typeof adError.getMessage&&(errorMessage=adError.getMessage()),PRIVATE.clearImaObjects(),PRIVATE.onAdError(errorMessage)},!1),PRIVATE.sendBidsToAdServer()}catch(error){PRIVATE.onAdError(error)}},PRIVATE.loadAdvertise=function(){window.performance&&window.performance.mark&&window.performance.mark("PLAYER_AD_START"),PRIVATE.middlewareAdMode=!0,PRIVATE.firstPlay=!1,PRIVATE.setPlayerState("advertising","loading"),PRIVATE.els.player.classList.add("t360-player-force-spinner"),PRIVATE.adText=PRIVATE.els.player.querySelector(".vjs-time-divider span"),PRIVATE.setAdCount(),PRIVATE.videojsPlayer.duration(0),PRIVATE.adTimeoutTimer=setTimeout(PRIVATE.onAdTimeout,STATIC.adTimeout),PRIVATE.loadAdvertiseHTML5()},PRIVATE.play=function(){return PRIVATE.middlewareAdMode&&PRIVATE.adsManager?PRIVATE.isPaused&&(PRIVATE.adsManager.resume(),PRIVATE.isPaused=!1,PRIVATE.videojsPlayer.trigger("play")):PRIVATE.videojsPlayer.ready(function(){PRIVATE.videojsPlayer.play()}),PUBLIC.api},PRIVATE.pause=function(){return PRIVATE.middlewareAdMode&&PRIVATE.adsManager?PRIVATE.isPaused||(PRIVATE.adsManager.pause(),PRIVATE.isPaused=!0,PRIVATE.videojsPlayer.trigger("pause")):PRIVATE.videojsPlayer.pause(),PUBLIC.api},PRIVATE.stop=function(){return PRIVATE.videojsPlayer.pause(),PUBLIC.api},PRIVATE.playing=function(){return!!PRIVATE.videojsPlayer&&(0<PRIVATE.videojsPlayer.currentTime()&&!PRIVATE.videojsPlayer.paused()&&!PRIVATE.videojsPlayer.ended())},PRIVATE.setTransitionType=function(transitionType,transitionContentId){PRIVATE.transitionType=transitionType,PRIVATE.loadTransitionData(transitionContentId).then(function(){PRIVATE.state.on("ended",function(val){val&&PRIVATE.renderTransitionScreen()})})},window.setTransitionType=PRIVATE.setTransitionType,PRIVATE.getVolume=function(){return PRIVATE.videojsPlayer?PRIVATE.videojsPlayer.volume():PRIVATE.lastVolume||PRIVATE.restoredVolume},PRIVATE.getMutedState=function(){return PRIVATE.videojsPlayer?PRIVATE.videojsPlayer.muted():PRIVATE.muted},PRIVATE.setVolume=function(vol,saveLastVolume){return PRIVATE.state.set("volume",vol),saveLastVolume&&0<vol&&(PRIVATE.lastVolume=vol),PUBLIC.api},PRIVATE.getDuration=function(){return!!PRIVATE.videojsPlayer&&PRIVATE.videojsPlayer.duration()},PRIVATE.getCurrentTime=function(){return PRIVATE.videojsPlayer?PRIVATE.videojsPlayer.currentTime():0},PRIVATE.seek=function(secs){if(PRIVATE.videojsPlayer)return PRIVATE.videojsPlayer.currentTime(secs),PRIVATE.state.set("seek",secs),PUBLIC.api},PRIVATE.changeQuality=function(hd){PRIVATE.videoData&&PRIVATE.videojsPlayer&&(PRIVATE.getHighQuality(hd).then(function(mediaData){console.log("Will play",mediaData.url);var currentTime=PRIVATE.videojsPlayer.currentTime();PRIVATE.videojsPlayer.src(mediaData.url),PRIVATE.els.videoSource.src=mediaData.url,PRIVATE.videojsPlayer.play(),PRIVATE.videojsPlayer.currentTime(currentTime)}).catch(function(err){console.error(err),PRIVATE.treatPlayerError()}),hd?PRIVATE.els.player.setAttribute("hd","true"):PRIVATE.els.player.removeAttribute("hd"))},PRIVATE.getHighQuality=function(hd){var targetQuality=0,i;for(i in console.log(PRIVATE.videoData.bitrates),PRIVATE.videoData.bitrates){var bitrate=PRIVATE.videoData.bitrates[i];if(bitrate.hd==hd){targetQuality=bitrate;break}console.log("skipped",bitrate)}return new Promise(function buildUp(resolve,reject){resolve(targetQuality)})},PUBLIC.play=PUBLIC.api.play=PRIVATE.play,PUBLIC.api.seek=PRIVATE.seek,PUBLIC.pause=PUBLIC.api.pause=PRIVATE.pause,PUBLIC.stop=PUBLIC.api.stop=PRIVATE.stop,PUBLIC.api.setVolume=PRIVATE.setVolume,PUBLIC.api.getVolume=PRIVATE.getVolume,PUBLIC.api.getMutedState=PRIVATE.getMutedState,PUBLIC.api.getDuration=PRIVATE.getDuration,PUBLIC.api.getCurrentTime=PRIVATE.getCurrentTime,PUBLIC.api.setCurrentTime=PRIVATE.setCurrentTime,PUBLIC.api.transition=PRIVATE.transition,PUBLIC.api.renderTransition=PRIVATE.transition,PUBLIC.api.setupTransition=PRIVATE.setTransitionType,PUBLIC.api.setTransitionType=PRIVATE.transition,PUBLIC.api.stopTransition=PRIVATE.stopTransition,PUBLIC.inputData=data,STATIC_PUBLIC.redirectVideo=function(id){return STATIC.videoLink.replace("#VIDEO_ID#",id.toString())},PUBLIC.api.enableHD=function(){PRIVATE.changeQuality(!0)},PUBLIC.api.disableHD=function(){PRIVATE.changeQuality(!1)},PUBLIC.api.playPause=function(){PRIVATE.playing()?PRIVATE.pause():PRIVATE.play()},PUBLIC.api.mute=function(){PRIVATE.videojsPlayer.muted(!0)},PUBLIC.api.share=function(){PRIVATE.videojsPlayer.pause(),PRIVATE.openCloseShareMenu()},PUBLIC.api.unmute=function(){PRIVATE.videojsPlayer.muted(!1)},PUBLIC.api.getDimensions=function(){return PRIVATE.videojsPlayer?{w:PRIVATE.videojsPlayer.width(),h:PRIVATE.videojsPlayer.height(),d:PRIVATE.videojsPlayer.duration()}:null},PUBLIC.destroy=PRIVATE.destroy,PUBLIC.resize=PUBLIC.api.resize=PRIVATE.resize,PUBLIC.events=PRIVATE.state,PUBLIC.api.toggleFullScreen=function(){PRIVATE.videojsPlayer.isFullscreen()?PRIVATE.videojsPlayer.exitFullscreen():PRIVATE.videojsPlayer.requestFullscreen()},PUBLIC.api.isPip=function(){return PRIVATE.els.player.classList.contains("pip-mode")},PUBLIC.api.isPaused=function(){return PRIVATE.adPaused||PRIVATE.videojsPlayer.paused()&&!PRIVATE.middlewareAdMode},PUBLIC.api.changePipHeight=function(newHeight){PUBLIC.api.isPip()&&(PRIVATE.els.player.style.bottom=newHeight)},PUBLIC.api.closePip=PRIVATE.closePip,PRIVATE.listRelatedVideos=[],PRIVATE.transition=function(transitionType,transitionContentId){var typeOfTransitionType=typeof transitionType;"number"==typeOfTransitionType?PRIVATE.transitionType=transitionType:"object"==typeOfTransitionType&&null!=transitionType&&transitionType.hasOwnProperty("transitionType")&&(PRIVATE.transitionType=transitionType.transitionType),PRIVATE.loadTransitionData(transitionContentId).then(function(){PRIVATE.renderTransitionScreen()})},PRIVATE.loadTransitionData=function(transitionContentId){return new Promise(function(mainResolve,mainReject){var promises=[];"string"==typeof transitionContentId?promises.push(PRIVATE.getVideoData(transitionContentId)):promises.push(new Promise(function(resolve,rejct){resolve(null)})),PRIVATE.relatedVideosData?promises.push(new Promise(function(resolve,reject){resolve(null)})):promises.push(PRIVATE.getRelatedVideosData()),Promise.all(promises).then(function(relatedVideosData){var nextVideoData=relatedVideosData[0],relatedVideosData=relatedVideosData[1];nextVideoData&&1<nextVideoData.length&&nextVideoData[1]&&(nextVideoData=nextVideoData[1],PRIVATE.nextVideoData={id:nextVideoData.id,title:nextVideoData.title}),PRIVATE.relatedVideosData||"object"!=typeof relatedVideosData||null==relatedVideosData||(PRIVATE.relatedVideosData=relatedVideosData,!PRIVATE.nextVideoData&&0<relatedVideosData.length&&(PRIVATE.nextVideoData={id:relatedVideosData[0].id,title:relatedVideosData[0].title})),PRIVATE.transitionDataLoaded=!0,mainResolve()}).catch(function(error){console.error("Could not get related videos data",error),mainReject(error)})})},PRIVATE.getRelatedVideosData=async function(channel,existVideos){function getVideos(url){return fetch(url).then(function(response){return response.json()})}var url,existVideos;return channel=channel||(PRIVATE.videoData.infoPath&&PRIVATE.videoData.infoPath.channel?PRIVATE.videoData.infoPath.channel:"noticias"),existVideos=existVideos||(PRIVATE.videoData.infoPath&&PRIVATE.videoData.infoPath.subchannel?PRIVATE.videoData.infoPath.subchannel:""),PRIVATE.listRelatedVideos&&0==PRIVATE.listRelatedVideos.length&&(0<(existVideos=await getVideos("https://p1-cloud.trrsf.com.br/api/google-analytics/related-news?channel="+channel+"&subchannel="+existVideos+"&channeldetail=&limit=4&offset=0&startDate=6daysAgo&endDate=yesterday&timeDelta=7&fallbackChannel=true&fallbackSubchannel=true&infoType=ttv")).length?PRIVATE.listRelatedVideos=existVideos:PRIVATE.listRelatedVideos=await getVideos(STATIC.relatedVideosUrl)),PRIVATE.listRelatedVideos},PUBLIC.api.getRelatedVideosData=function(channel,subchannel){var result;return PRIVATE.getRelatedVideosData(channel,subchannel)},PRIVATE.playNextVideo=function(data){var nextVideoId,data;try{nextVideoId=data.id}catch(e){}nextVideoId&&(data={videoId:nextVideoId,type:data.type,container:PRIVATE.playerContainer,continuePip:PUBLIC.api.isPip()},__shared.states.set("nextVideo",data),PRIVATE.state.set("nextVideo",data))},PRIVATE.renderTransitionScreen=function(){return PRIVATE.transitionDataLoaded?("toosmall"!==PRIVATE.els.player.getAttribute("data-size")&&480<=PRIVATE.els.player.getAttribute("data-size")?PRIVATE.relatedVideosSize="regular":(console.warn("Show only one related"),PRIVATE.relatedVideosSize="small"),PRIVATE.playerContainer.querySelector(".t360-player--transition")||!0===PRIVATE.transitionScreenRendered?(PRIVATE.playerContainer.querySelector(".t360-player--transition")&&(PRIVATE.els.player.setAttribute("data-transition-panel","opened"),PRIVATE.els.player.setAttribute("data-transition-panel-type","related_list")),console.warn("Transition screen already exists. Will not create another one")):(PRIVATE.transitionScreenRendered=!0,PRIVATE.transitionType!==STATIC_PUBLIC.CONTINUOUS_PLAY||PRIVATE.nextVideoData||(console.warn("nextVideoData not found. Forcing to use related videos."),PRIVATE.transitionType=STATIC_PUBLIC.RELATED_LIST),PRIVATE.transitionType!==STATIC_PUBLIC.RELATED_LIST||PRIVATE.relatedVideosData?(PRIVATE.relatedVideosData=PRIVATE.relatedVideosData.filter(function(video){return video.id!==PRIVATE.videoData.id}).map(function(video){var regex,result=video.image.match(/http[s]?:\/\/(.*)/);return 1<result.length&&(video.croppedImage=STATIC.thumbnailCropperUrl+result[1]),video}),new Promise(function(fulfill,reject){fulfill(PUBLIC.templates.render("transitions",{relatedVideos:PRIVATE.relatedVideosData,transitionType:PRIVATE.transitionType,nextVideo:PRIVATE.nextVideoData,relatedVideosSize:PRIVATE.relatedVideosSize}))}).then(function(html){PRIVATE.videojsPlayer.el_.appendChild(html);var transition=PRIVATE.videojsPlayer.el_.querySelector(".t360-player--transition"),elemVideos,countdown,countdownNumber;PRIVATE.els.transitionRelatedVideosArea=PRIVATE.pqs(".t360-player--also-watch"),PRIVATE.els.transitionRelatedVideosArea.querySelectorAll(".t360-player--also-watch__video").forEach(function(elem){elem&&elem.addEventListener("click",function(){var channelPath=elem.htmlDataset("channel");window.tga.sendGA4("video",{event_label:"click",event_category:"related-videos",breadcrumb:channelPath})})}),PRIVATE.transitionType===STATIC_PUBLIC.CONTINUOUS_PLAY&&PRIVATE.nextVideoData&&(countdown=PRIVATE.els.transitionContinuousPlayArea=PRIVATE.videojsPlayer.el_.querySelector(".t360-player--continuous-play"),countdownNumber=countdown.querySelector(".t360-player--transition--countdown__value"),setTimeout(function(){transition.classList.add("waiting"),countdown.setAttribute("data-sec",countdown.getAttribute("data-sec")-1)},30),PRIVATE.transitionTimer=setInterval(function(){var timeRemaining=countdown.getAttribute("data-sec");1==timeRemaining&&(clearInterval(PRIVATE.transitionTimer),PRIVATE.playNextVideo({id:PRIVATE.nextVideoData.id,type:STATIC_PUBLIC.CONTINUOUS_PLAY})),countdownNumber.innerHTML=timeRemaining,countdown.setAttribute("data-sec",timeRemaining-1)},1e3),PRIVATE.els.transitionBtnStop=transition.querySelector(".t360-player--transition--stop"),PRIVATE.els.transitionBtnStop.addEventListener("click",function(){PRIVATE.stopTransition()}))}),void PRIVATE.els.player.setAttribute("data-transition-panel","opened")):console.error("Could not find related videos data. Will not show transition screen."))):console.info("Transition data not loaded. Will not render transition screen.")},PRIVATE.removeTransition=function(){PRIVATE.stopTransition(),PRIVATE.els.player.setAttribute("data-transition-panel",""),PRIVATE.els.transitionRelatedVideosArea&&PRIVATE.els.transitionRelatedVideosArea.classList.add("hidden"),PRIVATE.els.transitionContinuousPlayArea&&PRIVATE.els.transitionContinuousPlayArea.classList.add("hidden")},PRIVATE.stopTransition=function(){PRIVATE.transitionTimer&&(clearInterval(PRIVATE.transitionTimer),PRIVATE.els.transitionRelatedVideosArea.classList.remove("hidden"),PRIVATE.els.transitionContinuousPlayArea.classList.add("hidden"))},(queryStrings=pkg.context.page.get("query"))&&"false"==queryStrings.preroll&&(data.advertise.enabled=!1),!1===pkg.context.page.get("loadAds")&&(data.advertise.enabled=!1),STATIC_PUBLIC.instances.push(PUBLIC),PRIVATE.isIOS=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,PRIVATE.poster=data.poster,PRIVATE.prePoster=data.prePoster,PRIVATE.transitionType=STATIC_PUBLIC.CONTINUOUS_PLAY,pkg.utils.make.observable(PRIVATE.state),PUBLIC.buildUp().then(PRIVATE.requestBackend).then(PRIVATE.loadDependencies).then(PRIVATE.renderPlayer).then(PRIVATE.regThirdMetrics).then(PRIVATE.toPlayOrNoToPlay).catch(PRIVATE.treatPlayerError),PUBLIC},teardown:function(why,STATIC_PUBLIC,__proto,__shared){}})});